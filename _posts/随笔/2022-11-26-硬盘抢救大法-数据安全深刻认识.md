---
title: 硬盘抢救大法-数据安全深刻认识
date: 2022-11-26 17:40:21 +0800
categories: 随笔
tags: 漫谈 工具
---

## 来由

事情主要发生在上个周末，这本来应该是快快乐乐愉快玩耍摸鱼的周末，然后罪大恶极的周六例会开完后打了鸡血非要勤快地东搞一搞西搞一搞，想着把挖成马蜂窝的坑填一填，最后直接挖出了个更大的大窟窿....

先是浪费了一天搞博客然后很简单的Github Action弄了很久，不过至少学了点新东西吧。

然后第二天准备把原先拆下来的HDD里面的东西整理一下，东西整理完很清爽。毕竟软件基本都是重装过了、游戏一直在玩呢也处理好了。主要剩下的是学习资料（真）。整理整理也多是一件快活事，至少看看平时摸鱼都干了些啥。最终整理完剩下大概60G的资料，多其实不算多，写个代码能写多大点东西，但是有很多小文件，所以无论是拷贝、移动、压缩，速率都挺感人的。

首先这里的前置情况是，原本的HDD分为了D（软件）、F（学习）、G（游戏）三个盘，同时D盘后面分割了一部分装了ubuntu双系统。这就导致硬盘分区有点复杂，整理过程就引入了Disk Genius这种硬盘管理软件，带来了今天的万恶之源。

现在的情况是：

- 有一个整理好的HDD，里面有F（学习）盘60G/200G，G（游戏）盘200G，以及前面D盘全部格式化的一大块空间500G。
- 我还有一个2T的移动硬盘，一直用来备份各种杂七杂八的东西，作为垃圾桶。里面原有1T的数据。
- 我是个强迫症。

因此我希望把F盘学习资料迁移到移动硬盘，拆下来的HDD专门放游戏。所以情况是：

- F盘60G要迁往移动盘。
- 迁移速度很慢。
- 前面有使用DiskGenius。里面有一个镜像备份功能。

好吧，其实我很难说这样的备份是不是真的比压缩打包快。但这个功能是让我相信可以利用这个备份“更快”完成内容迁移。

- 使用镜像备份功能。该功能就是将一个硬盘分区备份为一个镜像文件，然后再从这个镜像文件可以恢复硬盘分区。简单的说就是将HDD中F盘迁移到移动盘中的F盘。
- 由上一点推测需要在移动盘添加一个新的分区。
- 正在使用DiskGenius完成上述工作。

OK，前置准备已完成，大坑来了，在使用DiskGenius对移动盘进行分区的时候，一个错误一闪而过，然后，然后，移动盘显示已损坏，所有数据都丢失了！这个时候Windows也无法打开，显示已损坏，但能够在磁盘管理中看到设备，是RAW格式。DiskGenius中能看到分区，但是分区内数据均丢失。

心态爆炸！前面所有步骤都完成了，正准备中场开香槟呢。午觉起来备份已经完成，就小小分区的操作，竟然直接爆炸了！(▼皿▼#)

## 补救经过

首先，用hd tune，crystaldisk，东芝自带的检测工具扫过，基本没有坏道，大概排除物理损坏的情况。原本第一时间是怀疑硬盘坏了，就算不是我的瞎操作它应该也会坏。正打算跟没买多久的东芝对线，这时提前打消了对线。

同时，这个时候也回味了过来，一开始觉得没什么。丢了就丢了，硬盘很多时候都没在用。真的用的数据都一直在视野内。后面反应过来，平时不用不代表数据没用和不珍贵，最主要的是过往后几年存下来的各种各样的东西，做过的所有项目、课程作业、笔记、一些随笔等等，不像资源那种东西大不了重新获取。开始有些小慌。

然后开始找恢复手段。先是用DiskGenius（你闯的祸你自己不看着办一点?!），recua(CCleaner家的)等。扫描结果类似，看到有一些目录比较完整，但大部分文件都很散乱，看不太出丢了哪些扫出来多少，且能不能用。恢复过程卡死机一次。下面是DiskGenius的扫描结果。

![image-20221127204141146](https://picbed-1307731756.cos.ap-hongkong.myqcloud.com/img/image-20221127205428386.png)

一时没特别好的反馈之下尝试向专业人士求助，在校内找了一家电脑维修店，放去试了一下，那里的解释是他们可以结合专业的硬件设施，听说是PC3000。后面给的说法是：

> ①先尝试用专业的设备对硬盘进行扫描恢复，能够恢复出来收费就是400-500，时间大概是1-2天。
>
> ②在第一种不可取的情况下进行，用设备对硬盘底层数据进行编写修复再做数据恢复，这就会比较贵，价格大概是900-1100。时间大概是3-5天。

一看心态又凉一半。算了自己看着办，不行就当做是教训了。拿回来之后，因为事情很多放了一段时间。之后再去找恢复软件。一番调研之后选择了三款：

1. **DiskDrill**
2. **StellarDataRecoveryPro**
3. 万兴恢复专家（说实话，从DiskGenius之后看到这种国产软件都怕）

这几个都是收费软件，一向觉得付费的东西总是比免费的好。一般来说贵的东西的缺点只有贵。不过价格确实贵，按时间场景来说，为了一次恢复买断一个软件也不值，一开始去找维修店也是觉得他们专业设备的购买是收费是分摊的，然而价格还是不太能接受。不过软件好说，盗版好搞嘛（第一时间竟然没想到盗版而是要不要买，正人君子呀）

第一个用DiskDrill扫描，它的成效是这样子的。不能说没有成果，但这个成果也太难消化了。21w图片，18w文档，没有太大实际作用。500的视频倒勉强可以使用。有点失望。

![image-20221127205428386](https://picbed-1307731756.cos.ap-hongkong.myqcloud.com/img/image-20221127204141146.png)

同时，恢复最好是恢复到另一块空间，避免覆盖原硬盘的数据。硬盘损坏第一时间禁止一切写入行为应该是个常识，所以不能用乱七八糟的恢复软件，更不安全。所以要找一块新空间。原硬盘数据有1T整，还有实验室有空闲机子，可以挂着扫描和存数据。稍微测试一下DiskDrill的恢复数据。

然后用stellarData扫描。结果，竟然出人意料的顺利！它也像是recua一样扫出来一大堆文件夹，大部分都属于lost location中。但是总共lost location的文件夹数量不多，只有几十个。一看里面的内容更是大喜过望，原本项目、作业这样的大文件夹目录结构完美保留，最多只是丢了其中几个小文件夹。看完所有目录，基本想要的大部分内容都在！芜湖！那还等什么，恢复呀。

![image-20221127210032649](https://picbed-1307731756.cos.ap-hongkong.myqcloud.com/img/image-20221127210032649.png)

完成主干的获取，心总算回到肚子里。接着还是到diskdrill中，挑挑拣拣搜集到丢的一些大视频。基本恢复也到这里了。然后重新整理归纳好内容。

这两软件使用都不复杂，基本跟着流程走就行。同时，这两个软件都有保存扫描记录的功能，一次恢复不完可以后续重新加载继续恢复，实用性好评。不愧是付费产品，虽然小的没钱支持一下，但这里给磕个头了。Orz

东西整理得差不多之后，就基本完成善后即可。原硬盘并没有物理损毁，所以其实只要重新格式化就能正常使用。方式是在windows文件资源管理器中右键格式化即可，文件格式选NTFS。但是格式化就代表着所有数据是真的没了，非常危险，保险起见再检查一下。最后用万兴看了一下。

![image-20221127202001028](https://picbed-1307731756.cos.ap-hongkong.myqcloud.com/img/image-20221127202001028.png)

扫描结果还行，虽然也挺乱的，还多了很多莫名其妙的东西，但是可恢复的也不少。但是同样是付费的，这里忘记找盗版了，同时也不能保存扫描记录，内容里面也没什么重要的，就此为止。

## 总结

这次的经过虽然以一个伤亡较低的结果结束了，并未形成惨痛的代价，但确确实实敲响了在数据安全这块的警钟。

- 为什么我在硬盘操作之前没再考虑一下呢？
- 为什么看到一个软件内的一个功能就欣然尝试呢？
- 为什么对各种警告词和操作过程这么大意，不看在眼里？

大概是

- 一方面，完全没有数据安全这方面的警惕性和保护数据的意识。这就是没经过毒打。
- 一直以来我做各种操作都非常轻松，像系统重装、升级，对于软件的各种功能更是充满好奇和勇于尝试。就是出于无畏，一个是真没出过事，然后也是一直其实有退路，所有内容已经备份好了。但是这次出事的正是作为备份的后花园。说明作为程序员求知欲和实践动手是可以的，但是要分清安全等级，对一些没有补救或者很难补救的措施有心理准备，考虑好后果，不能做的事不做、慎做。

最后关于数据安全，个人一直有整理、归纳、总结资料的习惯，但以往对于安全性没深刻认识，以为一个东西丢在那就没后顾之忧。把目前的数据恢复之后，是应该好好考虑这个问题。方法比如：

- 多个盘。但是对于个人来说，同时备份几个盘，也是非常麻烦的事情。
- NAS。对于个人也稍贵，动辄上千，如果确实资料比较珍贵，同时经济允许的话也是好方法。
- 云盘。像百度云、阿里云、google driver、onedrive，情况大概是：
  - 百度云：限速。会员一两百一年，空间大概有12T。会员有自动同步功能，自动同步文件夹，虽然个人不用。
  - 阿里云：限空间不限速。学生能领到1T多的免费空间。个人基本够用。会员的话也是一两百一年，6T空间。
  - google drive：有翻墙手段才能用。免费15G。不限速。空间购买一两百一年，100G。
  - OneDrive：windows自带。免费5G。400一年，1T。有自动同步功能。
  - 坚果云：专门的同步云盘。很多软件都支持同步设置。只限流量。免费额度是每月1G上传流量，3G下载流量。付费版一两百一年。空间42G。

总结来说，国内云盘的性价比肯定是更高的，当然也要承担内容审查的代价，想传些不当的东西会承受封掉的风险，像一些盗版软件也会有风险，像在阿里云盘，是不能分享的。

而国外云盘，除了价格更高一些，另外实际数据存在国外，万一国内跟国外发生什么事情，也是有数据安全风险的。

要是不看百度云的恶劣名声，它的性价比其实是最高的，功能也最强，手机端的内容备份、自动同步都有，虽然UI也非常杂乱、广告巨多。除了自己用也要考虑生态，虽然名声恶臭太不否认，百度云在国内还是垄断地位，很多资源还是通过百度云的方式分享的。除了个人云盘以外，其实还有资源下载这个杀器（同样的，其下载速度也是恶臭名声的来由）。

而像坚果云这种，个人感觉更多作为软件设置备份盘比较好。同时如果有文件同步需求，也可以考虑一下。默认安装在C盘比较恶心。

目前个人的选择的话，我是一直有百度会员，本来不打算续，打算转向阿里。原本更多是出于一定的痛恨、UI的直观性、以及作为分享工具分享给非会员朋友的便捷性。目前提升数据备份的重要性的话，似乎可以考虑这样的方案：

1. 垃圾桶一样杂七杂八的文件还是可以首先放到备份的移动盘。移动盘上面的大动作要更为谨慎。
2. 分享性质的资源同步至阿里云。反正目前也是免费试用。学生领取四年。
3. 个人备份文件的话，备份到百度云。特别是windows上归档好的大文件。手机上的图片等。甚至可以备份微信文件。

嗯说服自己继续购买百度云服务吧。至少有以下理由了：

1. 数据备份。最重要的、提升重视性的需求。之前觉得手机备份没那么重要，是没经过这个的痛，想想手机要是丢了，照片全没了是多么悲痛。
2. 资源下载。
3. 如果需要时的自动备份。
4. 期待其UI能好一点点吧。

不能永远沉迷于灾难始终慢我一步。
