<!DOCTYPE html><html lang="zh-CN" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="osgEarth添加图例" /><meta name="author" content="Olimi" /><meta property="og:locale" content="zh_CN" /><meta name="description" content="在osgEarth地图上添加图例 多的不说了直接上代码：" /><meta property="og:description" content="在osgEarth地图上添加图例 多的不说了直接上代码：" /><link rel="canonical" href="https://olimiya.github.io/posts/osgEarth%E6%B7%BB%E5%8A%A0%E5%9B%BE%E4%BE%8B/" /><meta property="og:url" content="https://olimiya.github.io/posts/osgEarth%E6%B7%BB%E5%8A%A0%E5%9B%BE%E4%BE%8B/" /><meta property="og:site_name" content="Olimi" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-02-11T20:54:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="osgEarth添加图例" /><meta name="twitter:site" content="@olimi861921648" /><meta name="twitter:creator" content="@olimi861921648" /><meta name="google-site-verification" content="g9ctzJLPpJ3wh5a6Bk6kvp7UAB5N22zIe2V2PZE72TA" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Olimi","url":"https://olimiya.github.io/"},"dateModified":"2020-02-11T20:54:00+08:00","datePublished":"2020-02-11T20:54:00+08:00","description":"在osgEarth地图上添加图例 多的不说了直接上代码：","headline":"osgEarth添加图例","mainEntityOfPage":{"@type":"WebPage","@id":"https://olimiya.github.io/posts/osgEarth%E6%B7%BB%E5%8A%A0%E5%9B%BE%E4%BE%8B/"},"url":"https://olimiya.github.io/posts/osgEarth%E6%B7%BB%E5%8A%A0%E5%9B%BE%E4%BE%8B/"}</script><title>osgEarth添加图例 | Olimi</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Olimi"><meta name="application-name" content="Olimi"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_2440352_86vrobdp9vu.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_2451185_tgvgeuen2lh.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tonsky/FiraCode@5.2/distr/fira_code.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Olimi</a></div><div class="site-subtitle font-italic">来者是客</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="iconfont icon-home ml-xl-3 mr-xl-3 unloaded"></i> <span>首页</span> </a><li class="nav-item"> <a href="/subdomain/" class="nav-link"> <i class="iconfont icon-buywebhostingstep1domain ml-xl-3 mr-xl-3 unloaded"></i> <span>子域</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="iconfont icon-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>分类</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="iconfont icon-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>标签</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="iconfont icon-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>归档</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="iconfont icon-info ml-xl-3 mr-xl-3 unloaded"></i> <span>关于</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="iconfont icon-adjust1"></i> </button> <span class="icon-border"></span> <a href="https://github.com/olimiya" aria-label="github" target="_blank" rel="noopener"> <i class="iconfont icon-github"></i> </a> <a href="https://twitter.com/olimi861921648" aria-label="twitter" target="_blank" rel="noopener"> <i class="iconfont icon-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['olimi861921648','gmail.com'].join('@')" aria-label="email" > <i class="iconfont icon-mail"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="iconfont icon-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> 首页 </a> </span> <span>osgEarth添加图例</span> </span> <i id="sidebar-trigger" class="iconfont icon-bars"></i><div id="topbar-title"> 文章</div><i id="search-trigger" class="iconfont icon-search"></i> <span id="search-wrapper" class="align-items-center"> <i class="iconfont icon-search"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="搜索..."> </span> <span id="search-cancel" >取消</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>osgEarth添加图例</h1><div class="post-meta text-muted"><div> 作者 <em> <a href="https://olimiya.github.io/">Olimi</a> </em></div><div class="d-flex"><div> <span> 发表于 <em class="timeago" data-ts="1581425640" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2020-02-11 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1135 字"> <em>6 分钟</em>阅读</span> <span id="busuanzi_container_page_pv"> 阅读量:<span id="busuanzi_value_page_pv"></span> </span></div></div></div><div class="post-content"><h1 id="在osgearth地图上添加图例">在osgEarth地图上添加图例</h1><p>多的不说了直接上代码：</p><p><strong>首先是添加控件（使用的是自带控件Control）</strong></p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
</pre><td class="rouge-code"><pre><span class="c1">//由于该功能属于项目的一部分，所以部分使用到的外部变量可能看不懂</span>
<span class="c1">//根据API更替为自己的变量即可</span>
<span class="n">osg</span><span class="o">::</span><span class="n">ref_ptr</span><span class="o">&lt;</span><span class="n">osg</span><span class="o">::</span><span class="n">Group</span><span class="o">&gt;</span> <span class="n">MAP_GR_CreateScale</span><span class="o">::</span><span class="n">createScale</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">osgEarth</span><span class="o">::</span><span class="n">Util</span><span class="o">::</span><span class="n">Controls</span><span class="p">;</span>
    <span class="n">osg</span><span class="o">::</span><span class="n">ref_ptr</span><span class="o">&lt;</span><span class="n">VBox</span><span class="o">&gt;</span> <span class="n">center</span> <span class="o">=</span> <span class="k">new</span> <span class="n">VBox</span><span class="p">(</span><span class="n">Control</span><span class="o">::</span><span class="n">ALIGN_RIGHT</span><span class="p">,</span> <span class="n">Control</span><span class="o">::</span><span class="n">ALIGN_BOTTOM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="c1">// Add a text label:</span>
    <span class="p">{</span>
        <span class="n">osg</span><span class="o">::</span><span class="n">ref_ptr</span><span class="o">&lt;</span><span class="n">HBox</span><span class="o">&gt;</span> <span class="n">labelBox</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HBox</span><span class="p">();</span>
        <span class="n">labelBox</span><span class="o">-&gt;</span><span class="n">setHorizFill</span><span class="p">(</span> <span class="nb">true</span> <span class="p">);</span>
        <span class="n">labelBox</span><span class="o">-&gt;</span><span class="n">setChildVertAlign</span><span class="p">(</span> <span class="n">Control</span><span class="o">::</span><span class="n">ALIGN_LEFT</span> <span class="p">);</span>
        <span class="n">labelBox</span><span class="o">-&gt;</span><span class="n">setMargin</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
        <span class="n">osg</span><span class="o">::</span><span class="n">ref_ptr</span><span class="o">&lt;</span><span class="n">LabelControl</span><span class="o">&gt;</span> <span class="n">label1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LabelControl</span><span class="p">(</span> <span class="s">"0"</span> <span class="p">);</span>
        <span class="n">label1</span><span class="o">-&gt;</span><span class="n">setFont</span><span class="p">(</span> <span class="n">osgEarth</span><span class="o">::</span><span class="n">Registry</span><span class="o">::</span><span class="n">instance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">getDefaultFont</span><span class="p">()</span> <span class="p">);</span>
        <span class="n">label1</span><span class="o">-&gt;</span><span class="n">setFontSize</span><span class="p">(</span> <span class="mf">10.0</span><span class="n">f</span> <span class="p">);</span>
        <span class="n">label1</span><span class="o">-&gt;</span><span class="n">setHorizAlign</span><span class="p">(</span> <span class="n">Control</span><span class="o">::</span><span class="n">ALIGN_LEFT</span> <span class="p">);</span>
        <span class="n">label1</span><span class="o">-&gt;</span><span class="n">setMargin</span><span class="p">(</span> <span class="mi">0</span> <span class="p">);</span>
        <span class="n">labelBox</span><span class="o">-&gt;</span><span class="n">addControl</span><span class="p">(</span> <span class="n">label1</span><span class="p">.</span><span class="n">get</span><span class="p">()</span> <span class="p">);</span>

        <span class="n">osg</span><span class="o">::</span><span class="n">ref_ptr</span><span class="o">&lt;</span><span class="n">LabelControl</span><span class="o">&gt;</span> <span class="n">label2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LabelControl</span><span class="p">(</span> <span class="s">"1000km"</span> <span class="p">);</span>
        <span class="n">label2</span><span class="o">-&gt;</span><span class="n">setFont</span><span class="p">(</span> <span class="n">osgEarth</span><span class="o">::</span><span class="n">Registry</span><span class="o">::</span><span class="n">instance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">getDefaultFont</span><span class="p">()</span> <span class="p">);</span>
        <span class="n">label2</span><span class="o">-&gt;</span><span class="n">setFontSize</span><span class="p">(</span> <span class="mf">10.0</span><span class="n">f</span> <span class="p">);</span>
        <span class="n">label2</span><span class="o">-&gt;</span><span class="n">setHorizAlign</span><span class="p">(</span> <span class="n">Control</span><span class="o">::</span><span class="n">ALIGN_CENTER</span> <span class="p">);</span>
        <span class="n">label2</span><span class="o">-&gt;</span><span class="n">setMargin</span><span class="p">(</span> <span class="mi">0</span> <span class="p">);</span>
        <span class="n">labelBox</span><span class="o">-&gt;</span><span class="n">addControl</span><span class="p">(</span> <span class="n">label2</span><span class="p">.</span><span class="n">get</span><span class="p">()</span> <span class="p">);</span>

        <span class="n">osg</span><span class="o">::</span><span class="n">ref_ptr</span><span class="o">&lt;</span><span class="n">LabelControl</span><span class="o">&gt;</span> <span class="n">label3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LabelControl</span><span class="p">(</span> <span class="s">"2000km"</span> <span class="p">);</span>
        <span class="n">label3</span><span class="o">-&gt;</span><span class="n">setFont</span><span class="p">(</span> <span class="n">osgEarth</span><span class="o">::</span><span class="n">Registry</span><span class="o">::</span><span class="n">instance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">getDefaultFont</span><span class="p">()</span> <span class="p">);</span>
        <span class="n">label3</span><span class="o">-&gt;</span><span class="n">setFontSize</span><span class="p">(</span> <span class="mf">10.0</span><span class="n">f</span> <span class="p">);</span>
        <span class="n">label3</span><span class="o">-&gt;</span><span class="n">setHorizAlign</span><span class="p">(</span> <span class="n">Control</span><span class="o">::</span><span class="n">ALIGN_RIGHT</span> <span class="p">);</span>
        <span class="n">label3</span><span class="o">-&gt;</span><span class="n">setMargin</span><span class="p">(</span> <span class="mi">0</span> <span class="p">);</span>
        <span class="n">labelBox</span><span class="o">-&gt;</span><span class="n">addControl</span><span class="p">(</span> <span class="n">label3</span><span class="p">.</span><span class="n">get</span><span class="p">()</span> <span class="p">);</span>

        <span class="n">center</span><span class="o">-&gt;</span><span class="n">addControl</span><span class="p">(</span><span class="n">labelBox</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>

        <span class="n">m_label2</span> <span class="o">=</span> <span class="n">label2</span><span class="p">;</span>
        <span class="n">m_label3</span> <span class="o">=</span> <span class="n">label3</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">//Add Bar</span>
    <span class="p">{</span>
        <span class="n">osg</span><span class="o">::</span><span class="n">ref_ptr</span><span class="o">&lt;</span><span class="n">HBox</span><span class="o">&gt;</span> <span class="n">barBox</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HBox</span><span class="p">();</span>
        <span class="n">barBox</span><span class="o">-&gt;</span><span class="n">setChildSpacing</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
        <span class="n">barBox</span><span class="o">-&gt;</span><span class="n">setChildVertAlign</span><span class="p">(</span> <span class="n">Control</span><span class="o">::</span><span class="n">ALIGN_LEFT</span> <span class="p">);</span>
        <span class="n">barBox</span><span class="o">-&gt;</span><span class="n">setMargin</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

        <span class="n">osg</span><span class="o">::</span><span class="n">ref_ptr</span><span class="o">&lt;</span><span class="n">HBox</span><span class="o">&gt;</span> <span class="n">bar1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HBox</span><span class="p">();</span>
        <span class="n">bar1</span><span class="o">-&gt;</span><span class="n">setSize</span><span class="p">(</span><span class="n">m_defaultPixel</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
        <span class="n">bar1</span><span class="o">-&gt;</span><span class="n">setBackColor</span><span class="p">(</span> <span class="n">osgEarth</span><span class="o">::</span><span class="n">Symbology</span><span class="o">::</span><span class="n">Color</span><span class="o">::</span><span class="n">Blue</span> <span class="p">);</span>
        <span class="n">bar1</span><span class="o">-&gt;</span><span class="n">setMargin</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

        <span class="n">osg</span><span class="o">::</span><span class="n">ref_ptr</span><span class="o">&lt;</span><span class="n">HBox</span><span class="o">&gt;</span> <span class="n">bar2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HBox</span><span class="p">();</span>
        <span class="n">bar2</span><span class="o">-&gt;</span><span class="n">setSize</span><span class="p">(</span><span class="n">m_defaultPixel</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
        <span class="n">bar2</span><span class="o">-&gt;</span><span class="n">setBackColor</span><span class="p">(</span> <span class="n">Color</span><span class="o">::</span><span class="n">White</span> <span class="p">);</span>
        <span class="n">bar2</span><span class="o">-&gt;</span><span class="n">setMargin</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

        <span class="n">barBox</span><span class="o">-&gt;</span><span class="n">addChild</span><span class="p">(</span><span class="n">bar1</span><span class="p">);</span>
        <span class="n">barBox</span><span class="o">-&gt;</span><span class="n">addChild</span><span class="p">(</span><span class="n">bar2</span><span class="p">);</span>
        <span class="n">center</span><span class="o">-&gt;</span><span class="n">addControl</span><span class="p">(</span><span class="n">barBox</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>

        <span class="n">m_bar1</span> <span class="o">=</span> <span class="n">bar1</span><span class="p">;</span>
        <span class="n">m_bar2</span> <span class="o">=</span> <span class="n">bar2</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">auto</span> <span class="n">l_mapData</span> <span class="o">=</span> <span class="n">MAP_GLOBALDATA_APPData</span><span class="o">::</span><span class="n">getInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">g_mapData</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">l_mapData</span><span class="o">-&gt;</span><span class="n">valid</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">nullptr</span><span class="p">;</span>
    <span class="n">osg</span><span class="o">::</span><span class="n">ref_ptr</span><span class="o">&lt;</span><span class="n">ControlCanvas</span><span class="o">&gt;</span> <span class="n">cs</span> <span class="o">=</span> <span class="n">ControlCanvas</span><span class="o">::</span><span class="n">getOrCreate</span><span class="p">(</span> <span class="n">l_mapData</span><span class="o">-&gt;</span><span class="n">pView</span> <span class="p">);</span>
    <span class="n">cs</span><span class="o">-&gt;</span><span class="n">addControl</span><span class="p">(</span><span class="n">center</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>

    <span class="n">m_pScale</span> <span class="o">=</span> <span class="n">center</span><span class="p">;</span>
    <span class="n">m_pCanvas</span> <span class="o">=</span> <span class="n">cs</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">m_pCanvas</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><p><strong>然后是实时更新（注册一个handler，在Scroll事件时调用即可）</strong></p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre><td class="rouge-code"><pre><span class="kt">void</span> <span class="n">MAP_GR_CreateScale</span><span class="o">::</span><span class="n">calScale</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">m_pCanvas</span><span class="p">)</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="c1">//默认的像素值（80）对应的距离</span>
    <span class="kt">int</span> <span class="n">defaultPixelDistance</span> <span class="o">=</span> <span class="n">MAP_OSG_OSGTool</span><span class="o">::</span><span class="n">getDistanceDifferByPixel</span><span class="p">(</span><span class="n">m_defaultPixel</span><span class="p">);</span>
<span class="c1">//    qDebug() &lt;&lt; defaultPixelDistance;</span>
    <span class="c1">//计算默认距离对应有效数字为一位的距离（显示数值）</span>
    <span class="kt">int</span> <span class="n">bit</span> <span class="o">=</span> <span class="n">QString</span><span class="o">::</span><span class="n">number</span><span class="p">(</span><span class="n">defaultPixelDistance</span><span class="p">).</span><span class="n">size</span><span class="p">();</span>
    <span class="kt">double</span> <span class="n">value</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">round</span><span class="p">(</span><span class="n">defaultPixelDistance</span> <span class="o">/</span> <span class="n">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">bit</span> <span class="o">-</span> <span class="mi">1</span><span class="p">));</span>
    <span class="kt">double</span> <span class="n">nearDistance</span> <span class="o">=</span> <span class="n">value</span> <span class="o">*</span> <span class="n">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">bit</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
    <span class="kt">double</span> <span class="n">width</span> <span class="o">=</span> <span class="n">MAP_OSG_OSGTool</span><span class="o">::</span><span class="n">getPixelByDistance</span><span class="p">(</span><span class="n">nearDistance</span><span class="p">);</span>
    <span class="n">m_bar1</span><span class="o">-&gt;</span><span class="n">setWidth</span><span class="p">(</span><span class="n">width</span><span class="p">);</span>
    <span class="n">m_bar1</span><span class="o">-&gt;</span><span class="n">dirty</span><span class="p">();</span>
    <span class="n">m_bar2</span><span class="o">-&gt;</span><span class="n">setWidth</span><span class="p">(</span><span class="n">width</span><span class="p">);</span>
    <span class="n">m_bar2</span><span class="o">-&gt;</span><span class="n">dirty</span><span class="p">();</span>

    <span class="n">QString</span> <span class="n">label1</span><span class="p">;</span>
    <span class="n">QString</span> <span class="n">label2</span><span class="p">;</span>
    <span class="c1">// km</span>
    <span class="kt">double</span> <span class="n">showValue</span> <span class="o">=</span> <span class="n">nearDistance</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">showValue</span> <span class="o">&lt;</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">label1</span> <span class="o">=</span> <span class="n">QString</span><span class="o">::</span><span class="n">number</span><span class="p">(</span><span class="n">showValue</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">+</span> <span class="s">"m"</span><span class="p">;</span>
        <span class="n">label2</span> <span class="o">=</span> <span class="n">QString</span><span class="o">::</span><span class="n">number</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">showValue</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">+</span> <span class="s">"m"</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">label1</span> <span class="o">=</span> <span class="n">QString</span><span class="o">::</span><span class="n">number</span><span class="p">(</span><span class="n">showValue</span><span class="p">)</span> <span class="o">+</span> <span class="s">"km"</span><span class="p">;</span>
        <span class="n">label2</span> <span class="o">=</span> <span class="n">QString</span><span class="o">::</span><span class="n">number</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">showValue</span><span class="p">)</span> <span class="o">+</span> <span class="s">"km"</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">m_label2</span><span class="o">-&gt;</span><span class="n">setText</span><span class="p">(</span><span class="n">label1</span><span class="p">.</span><span class="n">toStdString</span><span class="p">());</span>
    <span class="n">m_label3</span><span class="o">-&gt;</span><span class="n">setText</span><span class="p">(</span><span class="n">label2</span><span class="p">.</span><span class="n">toStdString</span><span class="p">());</span>
<span class="p">}</span>
</pre></table></code></div></div><p><strong>附工具函数</strong></p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
</pre><td class="rouge-code"><pre><span class="n">osg</span><span class="o">::</span><span class="n">Vec2</span> <span class="n">MAP_OSG_OSGTool</span><span class="o">::</span><span class="n">getLatLongDegree</span><span class="p">(</span><span class="kt">double</span> <span class="n">x</span><span class="p">,</span> <span class="kt">double</span> <span class="n">y</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">osg</span><span class="o">::</span><span class="n">Vec2</span> <span class="n">pos</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">);</span>
    <span class="k">auto</span> <span class="n">l_mapData</span> <span class="o">=</span> <span class="n">MAP_GLOBALDATA_APPData</span><span class="o">::</span><span class="n">getInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">g_mapData</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">l_mapData</span><span class="o">-&gt;</span><span class="n">valid</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">osg</span><span class="o">::</span><span class="n">Vec2</span><span class="p">();</span>
    <span class="n">osgViewer</span><span class="o">::</span><span class="n">View</span><span class="o">*</span> <span class="n">l_pViewer</span> <span class="o">=</span> <span class="n">l_mapData</span><span class="o">-&gt;</span><span class="n">pView</span><span class="p">;</span>
    <span class="k">auto</span> <span class="n">l_mapNode</span> <span class="o">=</span> <span class="n">osgEarth</span><span class="o">::</span><span class="n">MapNode</span><span class="o">::</span><span class="n">findMapNode</span><span class="p">(</span><span class="n">l_pViewer</span><span class="o">-&gt;</span><span class="n">getSceneData</span><span class="p">());</span>
    <span class="n">osg</span><span class="o">::</span><span class="n">NodePath</span> <span class="n">l_nodePath</span><span class="p">;</span>
    <span class="n">l_nodePath</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">l_mapNode</span><span class="o">-&gt;</span><span class="n">getTerrainEngine</span><span class="p">());</span>

    <span class="c1">// 获取当前点</span>
    <span class="n">osgUtil</span><span class="o">::</span><span class="n">LineSegmentIntersector</span><span class="o">::</span><span class="n">Intersections</span> <span class="n">intersection</span><span class="p">;</span>
    <span class="n">l_pViewer</span><span class="o">-&gt;</span><span class="n">computeIntersections</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">l_nodePath</span><span class="p">,</span> <span class="n">intersection</span><span class="p">);</span>
    <span class="n">osgUtil</span><span class="o">::</span><span class="n">LineSegmentIntersector</span><span class="o">::</span><span class="n">Intersections</span><span class="o">::</span><span class="n">iterator</span> <span class="n">iter</span>
            <span class="o">=</span> <span class="n">intersection</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">iter</span> <span class="o">!=</span> <span class="n">intersection</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
    <span class="p">{</span>
        <span class="n">osgEarth</span><span class="o">::</span><span class="n">GeoPoint</span> <span class="n">point</span><span class="p">;</span>
        <span class="n">point</span><span class="p">.</span><span class="n">fromWorld</span><span class="p">(</span><span class="n">l_mapNode</span><span class="o">-&gt;</span><span class="n">getMap</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">getSRS</span><span class="p">(),</span> <span class="n">iter</span><span class="o">-&gt;</span><span class="n">getWorldIntersectPoint</span><span class="p">());</span>
        <span class="n">pos</span><span class="p">.</span><span class="n">x</span><span class="p">()</span> <span class="o">=</span> <span class="n">point</span><span class="p">.</span><span class="n">x</span><span class="p">();</span>
        <span class="n">pos</span><span class="p">.</span><span class="n">y</span><span class="p">()</span> <span class="o">=</span> <span class="n">point</span><span class="p">.</span><span class="n">y</span><span class="p">();</span>

        <span class="k">return</span> <span class="n">pos</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">osg</span><span class="o">::</span><span class="n">Vec2</span><span class="p">();</span>
<span class="p">}</span>

<span class="n">osg</span><span class="o">::</span><span class="n">Vec3</span> <span class="n">MAP_OSG_OSGTool</span><span class="o">::</span><span class="n">windowsXYToLatLongDegree</span><span class="p">(</span><span class="kt">double</span> <span class="n">x</span><span class="p">,</span> <span class="kt">double</span> <span class="n">y</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">auto</span> <span class="n">l_mapData</span> <span class="o">=</span> <span class="n">MAP_GLOBALDATA_APPData</span><span class="o">::</span><span class="n">getInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">g_mapData</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">l_mapData</span><span class="o">-&gt;</span><span class="n">valid</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">osg</span><span class="o">::</span><span class="n">Vec3</span><span class="p">();</span>
    <span class="k">auto</span> <span class="n">camera</span> <span class="o">=</span> <span class="n">l_mapData</span><span class="o">-&gt;</span><span class="n">pView</span><span class="o">-&gt;</span><span class="n">getCamera</span><span class="p">();</span>
    <span class="n">osg</span><span class="o">::</span><span class="n">Matrix</span> <span class="n">VPW</span> <span class="o">=</span> <span class="n">camera</span><span class="o">-&gt;</span><span class="n">getViewMatrix</span><span class="p">()</span> <span class="o">*</span>
                      <span class="n">camera</span><span class="o">-&gt;</span><span class="n">getProjectionMatrix</span><span class="p">()</span> <span class="o">*</span>
                      <span class="n">camera</span><span class="o">-&gt;</span><span class="n">getViewport</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">computeWindowMatrix</span><span class="p">();</span>
    <span class="n">osg</span><span class="o">::</span><span class="n">Matrix</span> <span class="n">inverseVPW</span><span class="p">;</span>
    <span class="n">inverseVPW</span><span class="p">.</span><span class="n">invert</span><span class="p">(</span><span class="n">VPW</span><span class="p">);</span>
    <span class="n">osg</span><span class="o">::</span><span class="n">Vec3d</span> <span class="n">world</span> <span class="o">=</span> <span class="n">osg</span><span class="o">::</span><span class="n">Vec3d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="n">inverseVPW</span><span class="p">;</span>
    <span class="n">osgEarth</span><span class="o">::</span><span class="n">GeoPoint</span> <span class="n">point</span><span class="p">;</span>
    <span class="n">point</span><span class="p">.</span><span class="n">fromWorld</span><span class="p">(</span><span class="n">l_mapData</span><span class="o">-&gt;</span><span class="n">pMapSRS</span><span class="p">,</span> <span class="n">world</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">osg</span><span class="o">::</span><span class="n">Vec3</span><span class="p">(</span><span class="n">point</span><span class="p">.</span><span class="n">x</span><span class="p">(),</span> <span class="n">point</span><span class="p">.</span><span class="n">y</span><span class="p">(),</span> <span class="n">point</span><span class="p">.</span><span class="n">z</span><span class="p">());</span>
<span class="p">}</span>

<span class="n">osg</span><span class="o">::</span><span class="n">Vec2</span> <span class="n">MAP_OSG_OSGTool</span><span class="o">::</span><span class="n">LatLongDegreeToWindowsXY</span><span class="p">(</span><span class="kt">double</span> <span class="n">latDegree</span><span class="p">,</span> <span class="kt">double</span> <span class="n">longDegree</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">auto</span> <span class="n">l_mapData</span> <span class="o">=</span> <span class="n">MAP_GLOBALDATA_APPData</span><span class="o">::</span><span class="n">getInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">g_mapData</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">l_mapData</span><span class="o">-&gt;</span><span class="n">valid</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">osg</span><span class="o">::</span><span class="n">Vec2</span><span class="p">();</span>
    <span class="k">auto</span> <span class="n">camera</span> <span class="o">=</span> <span class="n">l_mapData</span><span class="o">-&gt;</span><span class="n">pView</span><span class="o">-&gt;</span><span class="n">getCamera</span><span class="p">();</span>
    <span class="n">osg</span><span class="o">::</span><span class="n">Matrix</span> <span class="n">VPW</span> <span class="o">=</span> <span class="n">camera</span><span class="o">-&gt;</span><span class="n">getViewMatrix</span><span class="p">()</span> <span class="o">*</span>
                      <span class="n">camera</span><span class="o">-&gt;</span><span class="n">getProjectionMatrix</span><span class="p">()</span> <span class="o">*</span>
                      <span class="n">camera</span><span class="o">-&gt;</span><span class="n">getViewport</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">computeWindowMatrix</span><span class="p">();</span>

    <span class="n">osg</span><span class="o">::</span><span class="n">Vec3d</span> <span class="n">world</span><span class="p">;</span>
    <span class="kt">bool</span> <span class="n">b</span> <span class="o">=</span> <span class="n">l_mapData</span><span class="o">-&gt;</span><span class="n">pMapSRS</span><span class="o">-&gt;</span><span class="n">transformToWorld</span><span class="p">(</span><span class="n">osg</span><span class="o">::</span><span class="n">Vec3d</span><span class="p">(</span><span class="n">longDegree</span><span class="p">,</span> <span class="n">latDegree</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="n">world</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">b</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">osg</span><span class="o">::</span><span class="n">Vec2</span><span class="p">();</span>
    <span class="k">auto</span> <span class="n">windows</span> <span class="o">=</span> <span class="n">world</span> <span class="o">*</span> <span class="n">VPW</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">osg</span><span class="o">::</span><span class="n">Vec2</span><span class="p">(</span><span class="n">windows</span><span class="p">.</span><span class="n">x</span><span class="p">(),</span> <span class="n">windows</span><span class="p">.</span><span class="n">y</span><span class="p">());</span>
<span class="p">}</span>

<span class="n">osg</span><span class="o">::</span><span class="n">Vec2d</span> <span class="n">MAP_OSG_OSGTool</span><span class="o">::</span><span class="n">getLatLongDifferByPixel</span><span class="p">(</span><span class="kt">double</span> <span class="n">hPixel</span><span class="p">,</span> <span class="kt">double</span> <span class="n">vPixel</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">osg</span><span class="o">::</span><span class="n">Vec2d</span> <span class="n">differ</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">);</span>
    <span class="k">auto</span> <span class="n">widget</span> <span class="o">=</span> <span class="n">MAP_GLOBALDATA_APPData</span><span class="o">::</span><span class="n">getInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">g_osgWidget</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">widget</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">differ</span><span class="p">;</span>

    <span class="kt">double</span> <span class="n">centerX</span> <span class="o">=</span> <span class="n">widget</span><span class="o">-&gt;</span><span class="n">width</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">centerY</span> <span class="o">=</span> <span class="n">widget</span><span class="o">-&gt;</span><span class="n">height</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">osg</span><span class="o">::</span><span class="n">Vec2</span> <span class="n">centerLatLong</span> <span class="o">=</span> <span class="n">getLatLongDegree</span><span class="p">(</span><span class="n">centerX</span><span class="p">,</span> <span class="n">centerY</span><span class="p">);</span>

    <span class="kt">double</span> <span class="n">differX</span> <span class="o">=</span> <span class="n">centerX</span> <span class="o">+</span> <span class="n">hPixel</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">differY</span> <span class="o">=</span> <span class="n">centerY</span> <span class="o">+</span> <span class="n">vPixel</span><span class="p">;</span>
    <span class="n">osg</span><span class="o">::</span><span class="n">Vec2</span> <span class="n">differLatLong</span> <span class="o">=</span> <span class="n">getLatLongDegree</span><span class="p">(</span><span class="n">differX</span><span class="p">,</span> <span class="n">differY</span><span class="p">);</span>

    <span class="n">differ</span><span class="p">.</span><span class="n">x</span><span class="p">()</span> <span class="o">=</span> <span class="n">abs</span><span class="p">(</span><span class="n">differLatLong</span><span class="p">.</span><span class="n">x</span><span class="p">()</span> <span class="o">-</span> <span class="n">centerLatLong</span><span class="p">.</span><span class="n">x</span><span class="p">());</span>
    <span class="n">differ</span><span class="p">.</span><span class="n">y</span><span class="p">()</span> <span class="o">=</span> <span class="n">abs</span><span class="p">(</span><span class="n">differLatLong</span><span class="p">.</span><span class="n">y</span><span class="p">()</span> <span class="o">-</span> <span class="n">centerLatLong</span><span class="p">.</span><span class="n">y</span><span class="p">());</span>
    <span class="k">return</span> <span class="n">differ</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="n">MAP_OSG_OSGTool</span><span class="o">::</span><span class="n">getDistanceDifferByPixel</span><span class="p">(</span><span class="kt">double</span> <span class="n">hPixel</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">auto</span> <span class="n">widget</span> <span class="o">=</span> <span class="n">MAP_GLOBALDATA_APPData</span><span class="o">::</span><span class="n">getInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">g_osgWidget</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">widget</span><span class="p">)</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>

    <span class="kt">double</span> <span class="n">centerX</span> <span class="o">=</span> <span class="n">widget</span><span class="o">-&gt;</span><span class="n">width</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">centerY</span> <span class="o">=</span> <span class="n">widget</span><span class="o">-&gt;</span><span class="n">height</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">osg</span><span class="o">::</span><span class="n">Vec2</span> <span class="n">centerLatLong</span> <span class="o">=</span> <span class="n">getLatLongDegree</span><span class="p">(</span><span class="n">centerX</span><span class="p">,</span> <span class="n">centerY</span><span class="p">);</span>

    <span class="kt">double</span> <span class="n">differX</span> <span class="o">=</span> <span class="n">centerX</span> <span class="o">+</span> <span class="n">hPixel</span><span class="p">;</span>
    <span class="n">osg</span><span class="o">::</span><span class="n">Vec2</span> <span class="n">differLatLong</span> <span class="o">=</span> <span class="n">getLatLongDegree</span><span class="p">(</span><span class="n">differX</span><span class="p">,</span> <span class="n">centerY</span><span class="p">);</span>

    <span class="k">return</span> <span class="n">osgEarth</span><span class="o">::</span><span class="n">GeoMath</span><span class="o">::</span><span class="n">distance</span><span class="p">(</span><span class="n">osg</span><span class="o">::</span><span class="n">Vec3</span><span class="p">(</span><span class="n">centerLatLong</span><span class="p">.</span><span class="n">x</span><span class="p">(),</span> <span class="n">centerLatLong</span><span class="p">.</span><span class="n">y</span><span class="p">(),</span> <span class="mi">0</span><span class="p">),</span>
                                       <span class="n">osg</span><span class="o">::</span><span class="n">Vec3</span><span class="p">(</span><span class="n">differLatLong</span><span class="p">.</span><span class="n">x</span><span class="p">(),</span> <span class="n">differLatLong</span><span class="p">.</span><span class="n">y</span><span class="p">(),</span> <span class="mi">0</span><span class="p">),</span>
                                       <span class="n">MAP_GLOBALDATA_APPData</span><span class="o">::</span><span class="n">getInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">g_mapData</span><span class="o">-&gt;</span><span class="n">pMapSRS</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="n">MAP_OSG_OSGTool</span><span class="o">::</span><span class="n">getPixelByDistance</span><span class="p">(</span><span class="kt">double</span> <span class="n">distance</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">auto</span> <span class="n">widget</span> <span class="o">=</span> <span class="n">MAP_GLOBALDATA_APPData</span><span class="o">::</span><span class="n">getInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">g_osgWidget</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">widget</span><span class="p">)</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">centerX</span> <span class="o">=</span> <span class="n">widget</span><span class="o">-&gt;</span><span class="n">width</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">centerY</span> <span class="o">=</span> <span class="n">widget</span><span class="o">-&gt;</span><span class="n">height</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">osg</span><span class="o">::</span><span class="n">Vec2</span> <span class="n">centerLatLong</span> <span class="o">=</span> <span class="n">getLatLongDegree</span><span class="p">(</span><span class="n">centerX</span><span class="p">,</span> <span class="n">centerY</span><span class="p">);</span>

    <span class="kt">double</span> <span class="n">nextLat</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">nextLong</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">osgEarth</span><span class="o">::</span><span class="n">GeoMath</span><span class="o">::</span><span class="n">destination</span><span class="p">(</span><span class="n">osg</span><span class="o">::</span><span class="n">DegreesToRadians</span><span class="p">(</span><span class="n">centerLatLong</span><span class="p">.</span><span class="n">y</span><span class="p">()),</span>
                                   <span class="n">osg</span><span class="o">::</span><span class="n">DegreesToRadians</span><span class="p">(</span><span class="n">centerLatLong</span><span class="p">.</span><span class="n">x</span><span class="p">()),</span>
                                   <span class="mi">90</span><span class="p">,</span> <span class="n">distance</span><span class="p">,</span> <span class="n">nextLat</span><span class="p">,</span> <span class="n">nextLong</span><span class="p">);</span>
    <span class="n">nextLat</span> <span class="o">=</span> <span class="n">osg</span><span class="o">::</span><span class="n">RadiansToDegrees</span><span class="p">(</span><span class="n">nextLat</span><span class="p">);</span>
    <span class="n">nextLong</span> <span class="o">=</span> <span class="n">osg</span><span class="o">::</span><span class="n">RadiansToDegrees</span><span class="p">(</span><span class="n">nextLong</span><span class="p">);</span>

    <span class="k">auto</span> <span class="n">nextWindowXY</span> <span class="o">=</span> <span class="n">MAP_OSG_OSGTool</span><span class="o">::</span><span class="n">LatLongDegreeToWindowsXY</span><span class="p">(</span><span class="n">nextLat</span><span class="p">,</span> <span class="n">nextLong</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">distanceByPoints</span><span class="p">(</span><span class="n">osg</span><span class="o">::</span><span class="n">Vec2</span><span class="p">(</span><span class="n">centerX</span><span class="p">,</span> <span class="n">centerY</span><span class="p">),</span> <span class="n">nextWindowXY</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="n">MAP_OSG_OSGTool</span><span class="o">::</span><span class="n">distanceByPoints</span><span class="p">(</span><span class="n">osg</span><span class="o">::</span><span class="n">Vec3</span> <span class="n">first</span><span class="p">,</span> <span class="n">osg</span><span class="o">::</span><span class="n">Vec3</span> <span class="n">second</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">sqrt</span><span class="p">(</span><span class="n">pow</span><span class="p">(</span><span class="n">first</span><span class="p">.</span><span class="n">x</span><span class="p">()</span> <span class="o">-</span> <span class="n">second</span><span class="p">.</span><span class="n">x</span><span class="p">(),</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">pow</span><span class="p">(</span><span class="n">first</span><span class="p">.</span><span class="n">y</span><span class="p">()</span> <span class="o">-</span> <span class="n">second</span><span class="p">.</span><span class="n">y</span><span class="p">(),</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span>
                     <span class="n">pow</span><span class="p">(</span><span class="n">first</span><span class="p">.</span><span class="n">z</span><span class="p">()</span> <span class="o">-</span> <span class="n">second</span><span class="p">.</span><span class="n">z</span><span class="p">(),</span> <span class="mi">2</span><span class="p">));</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="n">MAP_OSG_OSGTool</span><span class="o">::</span><span class="n">distanceByPoints</span><span class="p">(</span><span class="n">osg</span><span class="o">::</span><span class="n">Vec2</span> <span class="n">first</span><span class="p">,</span> <span class="n">osg</span><span class="o">::</span><span class="n">Vec2</span> <span class="n">second</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">sqrt</span><span class="p">(</span><span class="n">pow</span><span class="p">(</span><span class="n">first</span><span class="p">.</span><span class="n">x</span><span class="p">()</span> <span class="o">-</span> <span class="n">second</span><span class="p">.</span><span class="n">x</span><span class="p">(),</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">pow</span><span class="p">(</span><span class="n">first</span><span class="p">.</span><span class="n">y</span><span class="p">()</span> <span class="o">-</span> <span class="n">second</span><span class="p">.</span><span class="n">y</span><span class="p">(),</span> <span class="mi">2</span><span class="p">));</span>
<span class="p">}</span>
</pre></table></code></div></div><p><strong>另，有一个小问题，就是如果是在handler中Scroll事件触发即刻调用更新，会导致地图还没来得及放缩，这个时候更新用的地图是原来的地图，肯定导致一定的误差。我的思路是：</strong></p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="kt">void</span> <span class="n">MAP_GR_CreateScale</span><span class="o">::</span><span class="n">updateScale</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">QTimer</span><span class="o">::</span><span class="n">singleShot</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">MAP_GR_CreateScale</span><span class="o">::</span><span class="n">calScale</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><p><strong>对，没错，就是万能的Timer~</strong></p><p><em>代码较为离散，毕竟是抠出来的一部分啦~</em></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="iconfont icon-FolderOpen-1"></i> <a href='/categories/%E6%9D%82%E8%AE%B0/'>杂记</a>, <a href='/categories/osg/'>OSG</a></div><div class="post-tags"> <i class="iconfont icon-tag"></i> <a href="/tags/%E8%AE%B0%E5%BD%95/" class="post-tag no-text-decoration" >记录</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 本文由作者按照 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 进行授权</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">分享</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=osgEarth%E6%B7%BB%E5%8A%A0%E5%9B%BE%E4%BE%8B+-+Olimi&url=https%3A%2F%2Folimiya.github.io%2Fposts%2FosgEarth%25E6%25B7%25BB%25E5%258A%25A0%25E5%259B%25BE%25E4%25BE%258B%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="iconfont icon-twitter"></i> </a> <a href="https://lineit.line.me/share/ui?url=https%3A%2F%2Folimiya.github.io%2Fposts%2FosgEarth%25E6%25B7%25BB%25E5%258A%25A0%25E5%259B%25BE%25E4%25BE%258B%2F&text=osgEarth%E6%B7%BB%E5%8A%A0%E5%9B%BE%E4%BE%8B+-+Olimi" data-toggle="tooltip" data-placement="top" title="Line" target="_blank" rel="noopener" aria-label="Line"> <i class="iconfont icon-13"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=osgEarth%E6%B7%BB%E5%8A%A0%E5%9B%BE%E4%BE%8B+-+Olimi&u=https%3A%2F%2Folimiya.github.io%2Fposts%2FosgEarth%25E6%25B7%25BB%25E5%258A%25A0%25E5%259B%25BE%25E4%25BE%258B%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="iconfont icon-facebook"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Folimiya.github.io%2Fposts%2FosgEarth%25E6%25B7%25BB%25E5%258A%25A0%25E5%259B%25BE%25E4%25BE%258B%2F&text=osgEarth%E6%B7%BB%E5%8A%A0%E5%9B%BE%E4%BE%8B+-+Olimi" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="iconfont icon-telegram"></i> </a> <a href="http://connect.qq.com/widget/shareqq/index.html?url=https%3A%2F%2Folimiya.github.io%2Fposts%2FosgEarth%25E6%25B7%25BB%25E5%258A%25A0%25E5%259B%25BE%25E4%25BE%258B%2F&title=osgEarth%E6%B7%BB%E5%8A%A0%E5%9B%BE%E4%BE%8B+-+Olimi" data-toggle="tooltip" data-placement="top" title="QQ" target="_blank" rel="noopener" aria-label="QQ"> <i class="iconfont icon-QQ"></i> </a> <a href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https%3A%2F%2Folimiya.github.io%2Fposts%2FosgEarth%25E6%25B7%25BB%25E5%258A%25A0%25E5%259B%25BE%25E4%25BE%258B%2F&title=osgEarth%E6%B7%BB%E5%8A%A0%E5%9B%BE%E4%BE%8B+-+Olimi" data-toggle="tooltip" data-placement="top" title="QQ 空间" target="_blank" rel="noopener" aria-label="QQ 空间"> <i class="iconfont icon-qzone"></i> </a> <a href="http://service.weibo.com/share/share.php?title=osgEarth%E6%B7%BB%E5%8A%A0%E5%9B%BE%E4%BE%8B+-+Olimi&url=https%3A%2F%2Folimiya.github.io%2Fposts%2FosgEarth%25E6%25B7%25BB%25E5%258A%25A0%25E5%259B%25BE%25E4%25BE%258B%2F" data-toggle="tooltip" data-placement="top" title="微博" target="_blank" rel="noopener" aria-label="微博"> <i class="iconfont icon-weibo"></i> </a> <i id="copy-link" class="iconfont icon-link small" data-toggle="tooltip" data-placement="top" title="分享链接" data-title-succeed="链接已复制！"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">最近更新</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%80%BB%E7%BB%93-Windows%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8/">命令行总结-Windows包管理器</a><li><a href="/posts/GithubPage/">GithubPage</a><li><a href="/posts/Windows-Terminal-+-WSL-+-Ubuntu-+-%E5%9B%BE%E5%BD%A2%E5%8C%96-%E7%BB%88%E7%AB%AF%E9%85%8D%E7%BD%AE%E6%80%BB%E7%BB%93/">Windows Terminal + WSL + Ubuntu + 图形化 总结</a><li><a href="/posts/%E4%B8%AA%E4%BA%BA%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8C%87%E5%8D%97/">个人云服务器指南</a><li><a href="/posts/%E6%97%A7%E9%85%8D%E7%BD%AE%E7%AC%94%E8%AE%B0%E6%9C%AC%E6%9B%B4%E6%96%B0Windows11-CPU%E4%B8%8D%E5%85%BC%E5%AE%B9/">旧配置笔记本更新windows11 Cpu不兼容</a></ul></div><div id="access-links"><div class="panel-heading">外部链接</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="https://996.icu" target="_blank"> <img src="https://img.shields.io/badge/link-996.icu-red.svg" alt="996.icu" /> </a><li><a href="https://github.com/Olimiya/olimiya.github.io" target="_blank"> <i class="iconfont icon-github"></i> &nbsp;此博客的 Github 仓库 </a></ul></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>相关文章</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/OSG%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/"><div class="card-body"> <em class="timeago small" data-ts="1581149160" > 2020-02-08 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>OSG智能指针：osg::ref_ptr</h3><div class="text-muted small"><p> 在osg开发时（特别是刚上手），有一点比较重要然后容易忽略的是，在osg程序开发中，要尽量使用osg::ref_ptr&amp;lt;T*&amp;gt;。 这个智能指针构建起osg的对象树（绝大部分osg类都是继承于osg::Referenced，即可计数对象），类似于Qt的对象树，负责其内存的管理。 当然其内存管理策略不是我们关心的，我们使用它的原因是基于其内存管理策略，大部分类的析构函数都是受保护...</p></div></div></a></div><div class="card"> <a href="/posts/OSG%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%AF/"><div class="card-body"> <em class="timeago small" data-ts="1581250200" > 2020-02-09 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>OSG学习之路</h3><div class="text-muted small"><p> osg入门的时候材料教程真的是特别少，而且很多都特别老的。 这里分享一下个人学习过程的项目，会持续更新。 里面暂时包括有：Array大佬《osg程序设计》所有源码的整理，配置好环境后可以直接运行；osg_earth官方例子的一些整理；osg+qt的实现；以及一些经验教训总结等。 项目地址： https://github.com/kkkiitty/learnOSG 当时整理的时候就想着...</p></div></div></a></div><div class="card"> <a href="/posts/osg%E6%B7%BB%E5%8A%A0%E6%8F%92%E4%BB%B6-%E7%88%AC%E5%9D%91%E4%B9%8B%E8%B7%AF-%E6%97%A0%E6%B3%95%E5%AE%9A%E4%BD%8D%E7%A8%8B%E5%BA%8F%E8%BE%93%E5%85%A5%E7%82%B9%E4%BA%8E%E5%8A%A8%E6%80%81%E5%BA%93%E4%B8%8A/"><div class="card-body"> <em class="timeago small" data-ts="1581329040" > 2020-02-10 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>osg添加插件--爬坑之路 无法定位程序输入点于动态库上</h3><div class="text-muted small"><p> 前文 osg官方推荐的Windows平台软件源（真希望做好起来）: vcpkg 正文 osg添加新插件（我们根据官方文档编译好的osg库中已经有了部分插件dll，见{OSG_DIR}\bin\osgPlugins-3.6.0，但要使用其他的插件，如svg插件则需要自己编译添加）。 寻找要添加的插件源码，osg官网提供有许多，参考url：https://github.com/opens...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/osg%E6%B7%BB%E5%8A%A0%E6%8F%92%E4%BB%B6-%E7%88%AC%E5%9D%91%E4%B9%8B%E8%B7%AF-%E6%97%A0%E6%B3%95%E5%AE%9A%E4%BD%8D%E7%A8%8B%E5%BA%8F%E8%BE%93%E5%85%A5%E7%82%B9%E4%BA%8E%E5%8A%A8%E6%80%81%E5%BA%93%E4%B8%8A/" class="btn btn-outline-primary" prompt="上一篇"><p>osg添加插件--爬坑之路 无法定位程序输入点于动态库上</p></a> <a href="/posts/Qt%E6%9F%A5%E7%9C%8B%E6%BA%90%E7%A0%81%E6%80%BB%E7%BB%93%E5%B8%96/" class="btn btn-outline-primary" prompt="下一篇"><p>Qt查看源码总结帖</p></a></div><div id="waline"></div><script> function loadWaline() { var s = document.createElement('script'); s.setAttribute('src', '//cdn.jsdelivr.net/npm/@waline/client'); s.async = false; document.body.appendChild(s); s.onload = () => { var valine = Waline({ el: '#waline', serverURL: 'https://waline.olimi.icu/', emoji: [ 'https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/qq', 'https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/tieba', 'https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/tw-emoji', 'https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/bilibili', ], dark: 'html[data-mode=dark]', avatar: 'mp', placeholder: '说点什么吧！', }); }; }; setTimeout(function () { if ("IntersectionObserver" in window) { var io = new IntersectionObserver(function (entries) { if (entries[0].isIntersecting) { loadWaline(); io.disconnect(); } }); io.observe(document.getElementById('waline')); } else { loadWaline(); } }, 1); </script></div></div></div><footer class="d-flex w-100 justify-content-center"> <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"> </script><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://olimiya.github.io/">Olimi</a>. <span data-toggle="tooltip" data-placement="top" title="除非另有说明，本网站上的博客文章均由作者按照知识共享署名 4.0 国际 (CC BY 4.0) 许可协议进行授权。">保留部分权利。</span> <span id="busuanzi_container_site_uv">总访客数<span id="busuanzi_value_site_uv"></span>人。</span></p></div><div class="footer-middle"><p class="mb-0"> <a href="http://beian.miit.gov.cn/" target="_blank">粤ICP备号</a></p></div><div class="footer-right"><p class="mb-0"> 本站由 <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> 生成，采用 <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> 主题。</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/%E8%AE%B0%E5%BD%95/">记录</a> <a class="post-tag" href="/tags/%E6%B8%B8%E6%88%8F%E5%BC%95%E6%93%8E/">游戏引擎</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/linux%E7%BC%96%E7%A8%8B/">Linux编程</a> <a class="post-tag" href="/tags/%E6%BC%AB%E8%B0%88/">漫谈</a> <a class="post-tag" href="/tags/%E7%BD%91%E7%AB%99/">网站</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/git/">Git</a> <a class="post-tag" href="/tags/markdown/">Markdown</a> <a class="post-tag" href="/tags/shell/">shell</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="iconfont icon-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">搜索结果为空</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="iconfont icon-folder"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="iconfont icon-tag"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/zh.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-NKV7205XPP"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-NKV7205XPP'); }); </script>
