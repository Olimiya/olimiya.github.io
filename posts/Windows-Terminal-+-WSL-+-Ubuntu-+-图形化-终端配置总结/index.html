<!DOCTYPE html><html lang="zh-CN" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="Windows Terminal + WSL + Ubuntu + 图形化 总结" /><meta name="author" content="Olimi" /><meta property="og:locale" content="zh_CN" /><meta name="description" content="前言" /><meta property="og:description" content="前言" /><link rel="canonical" href="https://olimiya.github.io/posts/Windows-Terminal-+-WSL-+-Ubuntu-+-%E5%9B%BE%E5%BD%A2%E5%8C%96-%E7%BB%88%E7%AB%AF%E9%85%8D%E7%BD%AE%E6%80%BB%E7%BB%93/" /><meta property="og:url" content="https://olimiya.github.io/posts/Windows-Terminal-+-WSL-+-Ubuntu-+-%E5%9B%BE%E5%BD%A2%E5%8C%96-%E7%BB%88%E7%AB%AF%E9%85%8D%E7%BD%AE%E6%80%BB%E7%BB%93/" /><meta property="og:site_name" content="Olimi" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-03-27T19:49:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Windows Terminal + WSL + Ubuntu + 图形化 总结" /><meta name="twitter:site" content="@olimi861921648" /><meta name="twitter:creator" content="@olimi861921648" /><meta name="google-site-verification" content="g9ctzJLPpJ3wh5a6Bk6kvp7UAB5N22zIe2V2PZE72TA" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Olimi","url":"https://olimiya.github.io/"},"dateModified":"2022-11-15T22:54:18+08:00","datePublished":"2022-03-27T19:49:00+08:00","description":"前言","headline":"Windows Terminal + WSL + Ubuntu + 图形化 总结","mainEntityOfPage":{"@type":"WebPage","@id":"https://olimiya.github.io/posts/Windows-Terminal-+-WSL-+-Ubuntu-+-%E5%9B%BE%E5%BD%A2%E5%8C%96-%E7%BB%88%E7%AB%AF%E9%85%8D%E7%BD%AE%E6%80%BB%E7%BB%93/"},"url":"https://olimiya.github.io/posts/Windows-Terminal-+-WSL-+-Ubuntu-+-%E5%9B%BE%E5%BD%A2%E5%8C%96-%E7%BB%88%E7%AB%AF%E9%85%8D%E7%BD%AE%E6%80%BB%E7%BB%93/"}</script><title>Windows Terminal + WSL + Ubuntu + 图形化 总结 | Olimi</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Olimi"><meta name="application-name" content="Olimi"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_2440352_86vrobdp9vu.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_2451185_tgvgeuen2lh.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tonsky/FiraCode@5.2/distr/fira_code.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Olimi</a></div><div class="site-subtitle font-italic">来者是客</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="iconfont icon-home ml-xl-3 mr-xl-3 unloaded"></i> <span>首页</span> </a><li class="nav-item"> <a href="/subdomain/" class="nav-link"> <i class="iconfont icon-buywebhostingstep1domain ml-xl-3 mr-xl-3 unloaded"></i> <span>子域</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="iconfont icon-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>分类</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="iconfont icon-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>标签</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="iconfont icon-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>归档</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="iconfont icon-info ml-xl-3 mr-xl-3 unloaded"></i> <span>关于</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="iconfont icon-adjust1"></i> </button> <span class="icon-border"></span> <a href="https://github.com/olimiya" aria-label="github" target="_blank" rel="noopener"> <i class="iconfont icon-github"></i> </a> <a href="https://twitter.com/olimi861921648" aria-label="twitter" target="_blank" rel="noopener"> <i class="iconfont icon-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['olimi861921648','gmail.com'].join('@')" aria-label="email" > <i class="iconfont icon-mail"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="iconfont icon-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> 首页 </a> </span> <span>Windows Terminal + WSL + Ubuntu + 图形化 总结</span> </span> <i id="sidebar-trigger" class="iconfont icon-bars"></i><div id="topbar-title"> 文章</div><i id="search-trigger" class="iconfont icon-search"></i> <span id="search-wrapper" class="align-items-center"> <i class="iconfont icon-search"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="搜索..."> </span> <span id="search-cancel" >取消</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Windows Terminal + WSL + Ubuntu + 图形化 总结</h1><div class="post-meta text-muted"><div> 作者 <em> <a href="https://olimiya.github.io/">Olimi</a> </em></div><div class="d-flex"><div> <span> 发表于 <em class="timeago" data-ts="1648381740" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-03-27 </em> </span> <span> 更新于 <em class="timeago" data-ts="1668524058" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-11-15 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="7910 字"> <em>43 分钟</em>阅读</span> <span id="busuanzi_container_page_pv"> 阅读量:<span id="busuanzi_value_page_pv"></span> </span></div></div></div><div class="post-content"><h2 id="前言"><span class="mr-2">前言</span><a href="#前言" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h2><p>最近上高级操作系统的研究生课，又开始折腾Linux系统。虽然我挺菜的，但就是差生文具多。所以先折腾折腾一个舒适的Linux环境吧。</p><p>配置Linux环境大致分为三种：</p><ul><li>双系统：划分一块硬盘空间，通过U盘等作为安装盘从镜像开始构建系统。最彻底最真实的Linux环境。好处就是更能折腾、自由度更高，不会出现各种兼容性问题。缺点是配置起来比较麻烦，不能自由切换windows与linux。<li>虚拟机：使用VMVare或VBox等软件，直接加载一个系统镜像启动虚拟机，硬盘分配可以是动态的。好处就是最方便快捷，也便于迁移（直接把整个虚拟机拷贝或复制到其他地方就能实现系统的迁移、移动或者复制），缺点是虚拟机运行效率不高，资源占用率高，可能会比较卡。<li>WSL：windows10开始内置的Linux子系统，是windows从内核层开发进行支持的GNU/Linux环境，优点是不会产生传统虚拟机或双启动设置开销，效率高，配置、使用起来也较为方便，非常适合用来进行轻量级的Linux开发。缺点是，并不是真正的Linux系统，使用范畴和使用方式还有所约束（比如硬件交互、图形化方式等等）。但好的地方在于，毕竟是微软爸爸推的东西，更新迭代还是可以期待的。</ul><p>总结一下本人的需求跟使用情况，以上三种我都有尝试跟使用。双系统对于我来说最主要的问题就是耗电速度太快了！不插电源的情况下是百分之20百分之20的掉，虚拟机则是又不方便用起来又low，于是开始尝试一下WSL。</p><p>除了关于WSL整个配置过程，在使用Windows Terminal过程的一些问题和配置情况也会进行记录。</p><p>之前发过了一次，重新发一次是因为，CSDN富文本编辑器是真滴难用！！每次回来补充记录就是折磨。故此重新弄一份MD的取代原本的。</p><h2 id="linux子系统wsl"><span class="mr-2">Linux子系统WSL</span><a href="#linux子系统wsl" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h2><p>启动方式： ​​​​​​​​​​​​​​<img data-src="https://img-blog.csdnimg.cn/e91dbafc30114d8c8e3cf38d0194444b.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQWxlemFu,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="启动Linux子系统" data-proofer-ignore></p><p>启动后忘记要不要重启了，最好重启一下吧，windows是这样的。</p><p>重启后在powershell输入：</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>wsl <span class="nt">--install</span>
</pre></table></code></div></div><p>即可进行安装。默认会安装Ubuntu 20.04的系统（当前）。</p><p>可以使用</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>wsl <span class="nt">--list</span> <span class="nt">--online</span>
</pre></table></code></div></div><p>查询可以安装的系统。或者也可以通过Microsoft store微软商店中搜索WSL，安装需要的系统。</p><p>但这种安装方式似乎是默认使用C盘进行安装的，好像强行改路径会出问题。Microsoft store微软商店中安装的软件可以在设置-&gt;应用和功能-&gt;搜索应用-&gt;移动，去修改路径。</p><p>于是本人使用的安装方式是手动安装的方式，就是先手动安装WSL2，下载系统镜像，直接安装系统镜像包。</p><p>整个流程大概：</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="c"># 1 启用适用于 Linux 的 Windows 子系统 启用过了可以不运行这个</span>
dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart
<span class="c"># 2 启用虚拟机功能</span>
dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
<span class="c"># 3 下载WSL2安装 https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi</span>
<span class="c"># 4 设置WSL2</span>
wsl <span class="nt">--set-default-version</span> 2
<span class="c"># 5 下载Ubuntu镜像包 https://wslstorestorage.blob.core.windows.net/wslblob/CanonicalGroupLimited.UbuntuonWindows_2004.2021.825.0.AppxBundle</span>
<span class="c"># 6 把它解压，解压两次，运行Ubuntu.exe安装 或者可以使用这个命令</span>
Add-AppxPackage .<span class="se">\a</span>pp_name.appx
</pre></table></code></div></div><p><strong>更新+1：</strong> 安装、下载、卸载、更改目录的操作可以参考一下：</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="nv">$ </span>wsl <span class="nt">-l</span> <span class="nt">-v</span>
  NAME            STATE           VERSION
<span class="k">*</span> Ubuntu          Running         2
  Ubuntu-18.04    Running         2
<span class="nv">$ </span>wsl <span class="nt">--export</span> Ubuntu-18.04 d:<span class="se">\w</span>sl<span class="se">\u</span>buntu18.04.tar
<span class="nv">$ </span>wsl <span class="nt">--unregister</span> Ubuntu-18.04
<span class="nv">$ </span>wsl <span class="nt">--import</span> Ubuntu-18.04 d:<span class="se">\w</span>sl<span class="se">\u</span>buntu<span class="se">\U</span>buntu-18.04 d:<span class="se">\w</span>sl<span class="se">\u</span>buntu18.04.tar <span class="nt">--version</span> 2
<span class="nv">$ </span>del d:<span class="se">\w</span>sl<span class="se">\u</span>buntu18.04.tar
</pre></table></code></div></div><p>上述整个过程的官方文档： <a href="https://docs.microsoft.com/zh-cn/windows/wsl/install">安装WSL|Microsoft Docs</a> ​<a href="https://docs.microsoft.com/zh-cn/windows/wsl/install-manual">旧版 WSL 的手动安装步骤</a></p><p><strong>更新+2：</strong></p><p>输入：<code class="language-plaintext highlighter-rouge">wsl --set-default-version 2</code>之前，需启动BIOS虚拟化：</p><div class="language-powershell highlighter-rouge"><div class="code-header"> <span data-label-text="Powershell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">bcdedit</span><span class="w"> </span><span class="nx">/set</span><span class="w"> </span><span class="nx">hypervisorlaunchtype</span><span class="w"> </span><span class="nx">auto</span><span class="w">
</span></pre></table></code></div></div><p>然后重启电脑。否则会显示：</p><blockquote><p>请启用虚拟机平台 Windows 功能并确保在 BIOS 中启用虚拟化。</p></blockquote><h2 id="windows-terminal"><span class="mr-2">Windows Terminal</span><a href="#windows-terminal" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h2><p>安装就直接通过Microsoft store安装即可（这里本人碰到个问题是，挂着代理的情况下连不上Microsoft store，要关掉代理，还试过连上了但一直显示无法连接Internet没办法安装，这时换一个网络，比如手机热点，就解决了）。安装完之后可以到设置里面更改位置，本人是放在D盘，更改方式：</p><p>设置-&gt;应用和功能-&gt;搜索应用-&gt;移动</p><p>另外，设置-&gt;系统-&gt;存储-&gt;更改新内容的保存位置，可以修改应用保存位置，但本人改了之后并没有什么反应。</p><p><strong>更新：</strong></p><p>关于安装路径：在新电脑安装，安装完成后无法移动位置。但是设置-&gt;系统-&gt;存储-&gt;更改新内容的保存位置，倒是可以在重装之后装到指定磁盘去。个人装到了D盘，就是多出了很多文件夹有点难看。</p><p><img data-src="https://raw.githubusercontent.com/Olimiya/PicBed/main/image-20220802162801767-16594325879651.png" alt="image-20220802162801767" data-proofer-ignore></p><p>关于右键菜单：似乎安装在D盘，自动添加的右键菜单也没了。不过没事，刚好可以自定义。方法：使用ContextMenuManager添加。</p><p><img data-src="https://raw.githubusercontent.com/Olimiya/PicBed/main/image-20220802162745286-16594325943023.png" alt="image-20220802162745286" data-proofer-ignore></p><p>-d 是指定目录为当前目录。</p><p>可以再添加多级菜单，选定打开的终端实例。</p><div class="table-wrapper"><table><tbody><tr><td>更多命令行参数：[Windows 终端命令行参数<td>Microsoft Docs](https://docs.microsoft.com/zh-cn/windows/terminal/command-line-arguments?tabs=windows)</table></div><p>本人的Windows Terminal主要添加了CMD、Power Shell、Git Bash、Ubuntu这几个终端。<del>具体的使用和配置已经非常人性化了，可自行摸索。</del></p><p><strong>更新：</strong></p><p>摸了一段时间，发现主题还是好难看，又摸索了一下。</p><p>先放一下最终成果图。</p><ul><li><p>CMD <img data-src="https://img-blog.csdnimg.cn/10b8625b0b974eb8ba49ececc2ab99f6.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQWxlemFu,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述" data-proofer-ignore></p><li><p>Power Shell <img data-src="https://img-blog.csdnimg.cn/75e40438dc3a4112afb4ce58d9d097c2.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQWxlemFu,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述" data-proofer-ignore></p><li><p>Ubuntu <img data-src="https://img-blog.csdnimg.cn/d48e851c42ab46f08c54d9474f4f576e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQWxlemFu,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述" data-proofer-ignore> 其实首要的需求是<strong>清晰</strong>看到命令行信息，<strong>对比度高</strong>，不要特别沉闷（默认的CMD），几个终端之间有一定<strong>区分度</strong>。只要满足这些条件即可。最终选定的配置是：</p><li>CMD：One Half Dark主题，开亚克力，不透明度0.8.<li><p>Power Shell：AdventureTime主题，开亚克力，不透明度0.7.</p><li>Ubuntu：Contrast Light主题，不开亚克力（个人建议背景图和亚克力不要一起开），加背景图（注意背景图整体色调跟选择的主题保持一定的相性，比如亮色主题选择浅色一点的背景图），背景不透明度0.25.</ul><p><a href="https://windowsterminalthemes.dev/">主题网站</a></p><p><a href="https://sspai.com/post/53008">主流主题的介绍</a></p><h3 id="更新1-git-bash"><span class="mr-2">更新+1 Git Bash</span><a href="#更新1-git-bash" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h3><p>使用了一段时间，win端普通使用喜欢用git-bash，将git-bash设为了默认。要几个要注意的是：</p><ol><li><p>命令使用：<strong>GIT安装目录\bin\bash.exe –login -i</strong> (bash命令与WSL的bash冲突，指定完整路径，添加后面两个option)；</p><li><p>git-bash中文问题：在<strong>GIT安装目录\etc\bash.bashrc</strong>最后添加：export LANG=”zh_CN.UTF-8” export LC_ALL=”zh_CN.UTF-8” <img data-src="https://img-blog.csdnimg.cn/c87ed40e7d584c75b88924f0c3b85820.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQWxlemFu,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述" data-proofer-ignore></p></ol><h3 id="更新2-git-bash闪烁"><span class="mr-2">更新+2 Git-Bash闪烁</span><a href="#更新2-git-bash闪烁" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h3><p>Git更新以后（Git建议还是可以持续更新的），GitBash终端在按删除键跟type补全时老会闪烁，闪烁这个不是Bug，就是个功能（不怕瞎的人才会用吧），在Windows Terminal中高级-&gt;铃声通知样式可以设置。 GitBash要关闭这个，创建~/.inputrc，添加：<strong>set bell-style none</strong>。即可。</p><p>最后配置文件懒得放了，天天改。</p><h3 id="更新3-管理员权限"><span class="mr-2">更新+3 管理员权限</span><a href="#更新3-管理员权限" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h3><p>参考：<a href="https://blog.csdn.net/qq_30262407/article/details/114921714">windows terminal使用管理员权限打开_qq_30262407的博客-CSDN博客_windows terminal 管理员</a></p><p><strong>更新：</strong>WT更新以后，似乎可以通过勾选设置里的”以管理员身份运行此配置文件“，即可获得管理员权限打开终端。不过为windows安装一个sudo也是件好事。</p><p><del>个人采用Gsudo方案：</del></p><ol><li><p>安装Gsudo</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nv">$ </span>PowerShell <span class="nt">-Command</span> <span class="s2">"Set-ExecutionPolicy RemoteSigned -scope Process; iwr -useb https://raw.githubusercontent.com/gerardog/gsudo/master/installgsudo.ps1 | iex"</span>
<span class="nv">$ </span>Set-ExecutionPolicy RemoteSigned <span class="c">#允许执行脚本</span>
<span class="nv">$ </span>Import-Module <span class="s1">'C:\Program Files (x86)\gsudo\gsudoModule.psd1'</span> <span class="c"># 添加sudo别名</span>
</pre></table></code></div></div><li><p>配置WT的setting.json</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="err">//</span><span class="w"> </span><span class="err">这行改成这样</span><span class="w">
</span><span class="nl">"commandline"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sudo powershell.exe"</span><span class="err">,</span><span class="w">
</span></pre></table></code></div></div></ol><h2 id="powershell"><span class="mr-2">Powershell</span><a href="#powershell" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h2><p>Windows上自带的终端来说还是powershell比较好用，虽然语法感觉更复杂。那也自定义增强一下。</p><p>运行执行脚本：</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>Set-ExecutionPolicy RemoteSigned <span class="c">#允许执行脚本</span>
</pre></table></code></div></div><h3 id="手动刷新环境变量"><span class="mr-2">手动刷新环境变量</span><a href="#手动刷新环境变量" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h3><p>制作一个命令RefreshEnv：</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="c"># 制作一个存放RefreshEnv这种小脚本的文件夹，添加到环境变量PATH。</span>
New-Item <span class="nv">$env</span>:USERPROFILE<span class="se">\D</span>ocuments<span class="se">\b</span><span class="k">in</span> <span class="nt">-itemtype</span> directory | Out-Null

Set-ItemProperty <span class="sb">`</span>

	<span class="nt">-Path</span> <span class="s2">"HKCU:</span><span class="se">\E</span><span class="s2">nvironment</span><span class="se">\"</span><span class="s2"> </span><span class="sb">`</span>
	
	<span class="nt">-Name</span> <span class="s2">"Path"</span> <span class="sb">`</span><span class="s2"> -Value ((Get-ItemPropertyValue -Path "</span>HKCU:<span class="se">\E</span>nvironment<span class="se">\"</span> <span class="nt">-Name</span> <span class="s2">"Path"</span><span class="o">)</span> +<span class="sb">`</span>
	
		<span class="s2">";"</span> + <span class="o">(</span><span class="nv">$env</span>:USERPROFILE<span class="o">)</span> + <span class="s2">"</span><span class="se">\D</span><span class="s2">ocuments</span><span class="se">\b</span><span class="s2">in;"</span><span class="o">)</span>
		
<span class="c"># 刷新环境变量脚本</span>
Invoke-WebRequest <span class="nt">-Uri</span> <span class="s2">"https://raw.githubusercontent.com/chocolatey/choco/master/src/chocolatey.resources/redirects/RefreshEnv.cmd"</span> <span class="nt">-OutFile</span> <span class="o">(</span><span class="s2">"</span><span class="nv">$env</span><span class="s2">:USERPROFILE"</span>+<span class="s2">"</span><span class="se">\D</span><span class="s2">ocuments</span><span class="se">\b</span><span class="s2">in</span><span class="se">\R</span><span class="s2">efreshEnv.cmd"</span><span class="o">)</span>

</pre></table></code></div></div><h3 id="windows包管理器"><span class="mr-2">Windows包管理器</span><a href="#windows包管理器" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h3><p>Windows安装软件基本都是通过安装包方式，但繁多的小功能软件自行管理会显得很麻烦，所以如果有一个类似ubuntu的apt系统也挺好的。windows有一个自带winget，但是个人使用一直显示源报错，其中一个源是msstore，而微软商店在国内网络经常抽风。所以选择另一个管理器scoop。</p><p>安装：</p><blockquote><p>Scoop 默认使用普通用户权限，其本体和安装的软件默认会放在 %USERPROFILE%\scoop(即 C:\Users\用户名\scoop)，使用管理员权限进行全局安装 (-g) 的软件在 C:\ProgramData\scoop。如果有自定安装路径的需求，那么要提前设置好环境变量，否则后续再改不是一件容易的事情。</p></blockquote><p>所以先设置用户安装路径</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nv">$env</span>:SCOOP<span class="o">=</span><span class="s1">'D:\Scoop'</span>
<span class="o">[</span>Environment]::SetEnvironmentVariable<span class="o">(</span><span class="s1">'SCOOP'</span>, <span class="nv">$env</span>:SCOOP, <span class="s1">'User'</span><span class="o">)</span>
</pre></table></code></div></div><p>然后以非管理员权限打开powershell</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="c"># Change execution policy</span>
Set-ExecutionPolicy RemoteSigned <span class="nt">-scope</span> CurrentUser
<span class="c"># Download and install scoop</span>
iwr <span class="nt">-useb</span> get.scoop.sh | iex
<span class="c"># Add useful buckets (resembles repos in apt)</span>
scoop bucket add extras
scoop bucket add versions
</pre></table></code></div></div><p>之后就可以<code class="language-plaintext highlighter-rouge">scoop install</code>安装包，比如<code class="language-plaintext highlighter-rouge">scoop install sudo</code>.</p><h3 id="on-my-posh"><span class="mr-2">on-my-posh</span><a href="#on-my-posh" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h3><p>类似于zsh和oh-my-zsh（Linux装机必备），在powershell中获取类似主题体验。</p><p>oh-my-posh新版本不能使用powershell的module安装方式，许多21年以前的博客安装说明已失效。以官方说明为准：<a href="https://ohmyposh.dev/docs/installation/windows">Windows Oh My Posh</a></p><p>安装：</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="c"># scoop</span>
scoop <span class="nb">install </span>https://github.com/JanDeDobbeleer/oh-my-posh/releases/latest/download/oh-my-posh.json
<span class="c"># powershell脚本</span>
Set-ExecutionPolicy Bypass <span class="nt">-Scope</span> Process <span class="nt">-Force</span><span class="p">;</span> Invoke-Expression <span class="o">((</span>New-Object System.Net.WebClient<span class="o">)</span>.DownloadString<span class="o">(</span><span class="s1">'https://ohmyposh.dev/install.ps1'</span><span class="o">))</span>
</pre></table></code></div></div><p>然后：</p><ol><li><p>安装字体（Nerd字体），因为很多主题使用图标，需要图标字体支持。</p><li><p>配置字体到终端使用，用的是Windows Terminal在全局设置即可。</p><li><p>配置终端使用oh-my-posh.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>notepad <span class="nv">$PROFILE</span>
   
<span class="c"># profile中输入：</span>
oh-my-posh init pwsh | Invoke-Expression
</pre></table></code></div></div></ol><p>配置和可能碰到的问题：</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c"># 缺少这个可能导致上面$profile加载失败</span>
Install-Module <span class="nt">-Name</span> PSReadLine <span class="nt">-AllowPrerelease</span> <span class="nt">-Force</span> <span class="c"># PSReadLine</span>
<span class="c"># 如果上面这行出错，执行以下</span>
Install-Module <span class="nt">-Name</span> PackageManagement <span class="nt">-Repository</span> PSGallery <span class="nt">-Force</span>
Install-Module <span class="nt">-Name</span> PowerShellGet <span class="nt">-Repository</span> PSGallery <span class="nt">-Force</span>
<span class="c"># 重启终端</span>
Install-Module <span class="nt">-Name</span> Az.StorageSync <span class="nt">-AllowPrerelease</span> <span class="nt">-AllowClobber</span> <span class="nt">-Force</span>

<span class="c"># posh-git 作用是powershell中集成git相关环境，帮助主题能够显示git项目的状态</span>
Install-Module posh-git <span class="nt">-Scope</span> CurrentUser 

</pre></table></code></div></div><p>为添加命令历史记录、tab补全、搜索历史记录等功能，配置profile文件，完整如下：</p><div class="language-text highlighter-rouge"><div class="code-header"> <span data-label-text="Text"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>Import-Module posh-git # 引入 posh-git
oh-my-posh init pwsh --config "$env:POSH_THEMES_PATH\cobalt2.omp.json" | Invoke-Expression

Set-PSReadLineOption -PredictionSource History # 设置预测文本来源为历史记录

Set-PSReadlineKeyHandler -Key Tab -Function Complete # 设置 Tab 键补全
Set-PSReadLineKeyHandler -Key "Ctrl+g" -Function MenuComplete # 设置 Ctrl+d 为菜单补全和 Intellisense
Set-PSReadLineKeyHandler -Key "Ctrl+z" -Function Undo # 设置 Ctrl+z 为撤销
Set-PSReadLineKeyHandler -Key UpArrow -Function HistorySearchBackward # 设置向上键为后向搜索历史记录
Set-PSReadLineKeyHandler -Key DownArrow -Function HistorySearchForward # 设置向下键为前向搜索历史纪录
</pre></table></code></div></div><p>上面可以看到主题配置，个人选择了cobalt2主题，主题选择可查看：<a href="https://ohmyposh.dev/docs/themes">Themes Oh My Posh</a>.</p><p>然后字体高亮上面可以配置$pshome\profile.ps1实现，个人不想折腾这个，直接使用Window Terminal自带的主题方案得了。</p><p>还有一些像conda配置关联的问题，没碰到先不管了。</p><p>参考：</p><ol><li><a href="https://zhangtianrong.github.io/2020/01/09/WT+POSH/">Windows Terminal + PowerShell 的配置 - 丏谷 Miangu Blog (zhangtianrong.github.io)</a><li><a href="https://zhuanlan.zhihu.com/p/384591031">Window终端 Powershell zsh同款 - 知乎 (zhihu.com)</a><li><a href="https://zhuanlan.zhihu.com/p/489898732">Scoop 安装使用 - 知乎 (zhihu.com)</a></ol><h2 id="cygwin"><span class="mr-2">Cygwin</span><a href="#cygwin" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h2><p>动机：获得一个轻量级的类Unix终端，可以安装一些Linux工具，同时能够在Windows终端中获取一些简易Linux功能（比如<strong>在CMD中获取ls</strong>这个指令）</p><blockquote><p>Cygwin 是:</p><ul><li>提供功能的大量 GNU 和开源工具 类似于Windows上的<a href="https://en.wikipedia.org/wiki/Linux_distribution">Linux发行版</a>。<li>一个DLL（cygwin1.dll），它提供了大量的POSIX API功能。</ul><p>不是：</p><ul><li>一种在Windows上运行本机Linux应用程序的方法。你必须 如果您希望应用程序在 Windows 上运行，请<em>从源代码重新</em>生成应用程序。<li>一种神奇地使本机 Windows 应用程序了解 UNIX® 的方法 信号、PTY 等功能。同样，如果你想利用Cygwin的功能，你需要<em>从源代码构建</em>你的应用程序。</ul></blockquote><p>当然除去使用Cygwin，还有类似的msys2等工具，自行选择吧，个人这里就仅需要一些很简单的功能。更复杂的支持使用前面的WSL，这里再安装一个轻量级的就是因为WSL打开较慢，占用率较高，同时不能提供外界直接使用unix指令。</p><h3 id="安装"><span class="mr-2">安装</span><a href="#安装" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h3><p>安装就官网下载<a href="https://www.cygwin.com/">安装包</a>一路安装即可。</p><p>注意：</p><ol><li>安装时选择一个源，推荐选择清华源：http://mirrors.ustc.edu.cn.<li>选择安装的包时，建议至少选择一个wget包。这里不用纠结安装哪些包，后续可以随时回来变更。<li>安装完成后，记得不要删除安装包。后续管理包都需要这个安装包，比如增加、卸载包。添加包不会覆盖原安装的包。</ol><h3 id="包管理器"><span class="mr-2">包管理器</span><a href="#包管理器" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h3><p>关于<strong>包管理</strong>：就像前面说的，要通过安装包去管理包，这确实就是官方的途径。</p><blockquote><p>除了安装程序之外，Cygwin中没有包管理。安装程序仅将更新应用于当前安装，它不会覆盖您已有的软件包（除非您明确说明）。</p><p>因此，请重新运行安装程序以安装新软件包。</p></blockquote><p>不过还是有一些第三方巩固，比如apt-cyg，提供类似于apt-get（但<strong>apt-cyg != apt-get</strong>，有时候出错了就乖乖用安装包维护吧）。apt-cyg安装：</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>wget https://raw.githubusercontent.com/transcode-open/apt-cyg/master/apt-cyg
<span class="nb">install </span>apt-cyg /bin
</pre></table></code></div></div><p>然后即可使用<code class="language-plaintext highlighter-rouge">apt-cyg install nano</code>安装。</p><p>另外，可通过<code class="language-plaintext highlighter-rouge">apt-cyg mirror</code>指定安装源。</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>apt-cyg mirror http://mirrors.ustc.edu.cn/cygwin/
</pre></table></code></div></div><p>此时可能出现</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>nano-4.9-1.tar.xz: 失败
<span class="nb">sha512sum</span>: 警告：1 个校验和不匹配
</pre></table></code></div></div><p>是由于wget导致的，换成lynx的话就会消失（安装lynx包卸载wget包），但是会导致更多的报错，所以还是愉快的当做看不到吧~</p><p>关于包管理器，还看到用Chocolatey管理的</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>choco <span class="nb">install </span>bash <span class="nt">--source</span><span class="o">=</span>cygwin
</pre></table></code></div></div><p>个人不使用这个windows包管理器，就不尝试了。</p><p>参考链接：<a href="https://superuser.com/questions/304541/how-to-install-new-packages-on-cygwin">updates - How to install new packages on Cygwin? - Super User</a></p><h3 id="使用配置"><span class="mr-2">使用配置</span><a href="#使用配置" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h3><p>把Cygwin添加到Windows Terminal中：打开WT设置，添加新配置文件，复制一个原有的比如Powershell，然后修改名称，命令，图标即可，命令修改为：<code class="language-plaintext highlighter-rouge">D:\software-dev\cygwin\bin\bash.exe -i -l</code>.</p><p>然后为了其他终端获取unix命令，添加环境变量，将<code class="language-plaintext highlighter-rouge">cygwin\bin</code>、<code class="language-plaintext highlighter-rouge">cygwin\sbin</code>、<code class="language-plaintext highlighter-rouge">cygwin\usr\local\bin</code>等加上，具体添加可自行选择一个或多个。</p><h2 id="ubuntu"><span class="mr-2">Ubuntu</span><a href="#ubuntu" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h2><h3 id="文件系统"><span class="mr-2">文件系统</span><a href="#文件系统" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h3><p>基于WSL使用Ubuntu，最方便的一点是，两个系统是直接互通的，什么意思呢？在WSL里面输入pwd.exe，可以看到结果为：</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nv">$ </span>pwd.exe
//wsl<span class="nv">$/</span>Ubuntu/home/olimi
</pre></table></code></div></div><p>所以在Windows里面可以直接使用这个路径访问WSL里面的文件。可以在文件系统右键我的电脑添加一个网络映射器，固定上述路径： <img data-src="https://img-blog.csdnimg.cn/a4efb33eb23e44d080f261c453d2f2a1.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQWxlemFu,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述" data-proofer-ignore> ​ 反过来在WSL中可以直接使用cd访问windows文件，注意windows的硬盘是通过mnt挂载</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>~ ⌚ 20:13:03
<span class="nv">$ </span><span class="nb">cd</span> /mnt/c/

/mnt/c ⌚ 20:13:05
<span class="nv">$ </span><span class="nb">pwd</span>
/mnt/c
</pre></table></code></div></div><p>这里还有一个需求是希望每次打开时自动进入用户目录，windows terminal提供了startingDirectory的选项，但如果设置为上述那个路径，类似于//wsl$/Ubuntu/home/olimi，会出现一个问题时，开机时因为不会自动启动WSL（一般也不需要开机启动），所以这个时候访问上面的路径是无法访问的，这就出现先有鸡还是先有蛋的问题，是先要启动WSL再能进入WSL。</p><p><strong>解决方案：</strong></p><p><del>在ubuntu的终端脚本（.bashrc、.zshrc等）添加一句命令，cd ~.</del></p><p>后续因为集成到文件目录右键菜单，直接在此处打开WSL，所以取消了这个设置。确实没啥必要。真要过去直接输入~就行了。</p><h3 id="zsh"><span class="mr-2">zsh</span><a href="#zsh" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h3><p>上面这里截取的命令可以看到，命令行提示跟默认的终端不一致，是因为我配置了zsh shell。这是非常建议使用的一个终端，非常强大（至少大神都是这么说的）。</p><blockquote><p>目前常用的 Linux 系统和 OS X 系统的默认 Shell 都是 bash，但是真正强大的 Shell 是深藏不露的 zsh， 这货绝对是马车中的跑车，跑车中的飞行车，史称『终极 Shell』，但是由于配置过于复杂，所以初期无人问津，很多人跑过来看看 zsh 的配置指南，什么都不说转身就走了。直到有一天，国外有个穷极无聊的程序员开发出了一个能够让你快速上手的zsh项目，叫做「oh my zsh」，Github 网址是：<a href="https://github.com/robbyrussell/oh-my-zsh。这玩意就像「X">https://github.com/robbyrussell/oh-my-zsh。这玩意就像「X</a>天叫你学会 C++」系列，可以让你神功速成，而且是真的。 ​ 安装也非常简单：</p></blockquote><ol><li>安装zs</ol><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>1.先看下自己有哪一些 shell
<span class="nb">cat</span> /etc/shells
2.如果没有 zsh 需要安装
<span class="nb">sudo </span>apt-get <span class="nb">install </span>zsh <span class="c">#Ubuntu Linux 记得先升级下 apt-get</span>
<span class="nb">sudo </span>yum <span class="nb">install </span>zsh <span class="c">#Redhat Linux</span>
3.安装完成后设置zsh 为默认shell
chsh <span class="nt">-s</span> /bin/zsh <span class="c">#安装完成后设置当前用户使用 zsh 并重启 wsl</span>
</pre></table></code></div></div><ul><li>安装oh my zsh</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>wget https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh
sh install.sh
</pre></table></code></div></div><ul><li>添加插件和修改主题</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="c"># 安装 Oh My Zsh 插件</span>
	1.安装 zsh-syntax-highlighting（代码高亮）
	git clone https://github.com/zsh-users/zsh-syntax-highlighting <span class="nv">$ZSH_CUSTOM</span>/plugins/zsh-syntax-highlighting
	2.安装 zsh-autosuggestions（自动建议）
	git clone https://github.com/zsh-users/zsh-autosuggestions <span class="nv">$ZSH_CUSTOM</span>/plugins/zsh-autosuggestions
	3.安装 zsh-completions（自动补全）
	git clone https://github.com/zsh-users/zsh-completions <span class="nv">$ZSH_CUSTOM</span>/plugins/zsh-completions
	4.zsh-com­ple­tions 插件需要将 autoload <span class="nt">-U</span> compinit <span class="o">&amp;&amp;</span> compinit 添加到.zshrc，输入命令可一键添加：
	<span class="o">[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="sb">`</span><span class="nb">grep</span> <span class="s2">"autoload -U compinit &amp;&amp; compinit"</span> ~/.zshrc<span class="sb">`</span><span class="s2">"</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">"autoload -U compinit &amp;&amp; compinit"</span> <span class="o">&gt;&gt;</span> ~/.zshrc
	5.把需要启用的插件写入到配置文件中，使用 <span class="nb">sed </span>命令一键操作：
	<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'/^plugins=/c\plugins=(git sudo z zsh-syntax-highlighting zsh-autosuggestions zsh-completions colored-man-pages)'</span> ~/.zshrc	
	6.最后应用配置
	<span class="nb">source</span> ~/.zshrc
</pre></table></code></div></div><p>以上几种插件是需要额外安装，其他一些插件在./plugins中有，可直接启用。oh my zsh 本人使用主题是<strong>amuse</strong>，可以在<a href="https://github.com/ohmyzsh/ohmyzsh/wiki/Themes">https://github.com/ohmyzsh/ohmyzsh/wiki/Themes</a>这里查看各种主题。</p><p>贴个成品图： ​​<img data-src="https://img-blog.csdnimg.cn/3a9cb487114d4ab5ab1677d984561447.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQWxlemFu,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述" data-proofer-ignore> ​</p><h2 id="服务器图形用户界面-远程桌面登录"><span class="mr-2">服务器图形用户界面-远程桌面登录</span><a href="#服务器图形用户界面-远程桌面登录" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h2><p>使用VNC的解决方案。</p><div class="table-wrapper"><table><tbody><tr><td>在官网：[RealVNC® - Remote access software for desktop and mobile<td>RealVNC](https://realvnc.com/)</table></div><p>下载服务端和客户端。其中服务端是收费的。自行搜索一个破解码即可。</p><p>安装完之后记得重启一下电脑，windows是这样的*2…</p><p>但有个问题是这个破解码是每次重启后就失效了。没有深究这个的原因，简单在.zshrc脚本中，添加如下命令：</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">alias sudo</span><span class="o">=</span><span class="s1">'sudo env PATH=$PATH '</span>
<span class="nb">alias </span><span class="nv">vncinit</span><span class="o">=</span><span class="s2">"vnclicense -add BQ24G-PDXE4-KKKRS-WBHZE-F5RCA"</span>
</pre></table></code></div></div><p>然后先调用<code class="language-plaintext highlighter-rouge">sudo vncinit</code>来解决。</p><p>另外还有像xrdp+远程连接的解决方案，个人尝试后觉得比较卡，就不赘述了。</p><p>还有类似于MobaXTerm软件的解决方案，内置了XServer，但跟上面xrdp一样卡，也不赘述了。</p><p><strong>更新：</strong> <em>之前一次弄到最后没什么精力了，所以将这部分偷懒了。有时间把这部分补充完整。</em></p><p>要远程控制ubuntu桌面，主要就是就是通过VNC或RDP协议。相关概念参考<a href="https://www.lategege.com/?p=691">ubuntu远程桌面连接方式(vnc、xrdp、vino、xorg等概念) – late哥哥笔记 (lategege.com)</a>.</p><p>需要远程桌面登录肯定需要一个桌面系统，ubuntu桌面版自带gnome，ubuntu服务端默认没有桌面。关于ubuntu的桌面系统：</p><blockquote><p>ubuntu的图形化界面主要有几种:unity\gnome\xfce\kde 其中unity在ubuntu早期版本中常用，新版本ubuntu默认桌面是gnome,而如果安装的是ubuntu server系统，需要在图形化操作，一般安装xfce，它非常轻量，kde在ubuntu中不常用。</p></blockquote><h3 id="vnc"><span class="mr-2">VNC</span><a href="#vnc" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h3><p>第一种最简单是安装的ubuntu带有默认的桌面系统，内置有VNC服务端，这里用的是WSL没有默认的桌面系统就不进行尝试了。同样的道理优先选择轻量级的xfce(不过即使是轻量级也有2-3G，穷人的辣鸡云服务器就不敢装了). VNC服务默认端口为5900端口，注意同时只能有一个vnc服务，端口占用无法共存。</p><ol><li><p>安装桌面</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="c"># 首先更新</span>
<span class="nb">sudo </span>apt-get update
<span class="nb">sudo </span>apt-get upgrade
   
<span class="c"># 安装要选择桌面管理环境gdm3或lightdm，这里选的轻量级lightdm</span>
<span class="nb">sudo </span>apt-get <span class="nb">install </span>xubuntu-desktop 
<span class="c"># 这里有个小问题是安装会自动安装locate，会扫描磁盘建立索引方便查找文件，问题是在WSL里会把挂载的外部windows文件系统也一同扫描，速度可能相当慢，可使用以下方式省略扫描windows：add /mnt to PRUNEPATHS in /etc/updatedb.conf</span>
<span class="c"># 或者尝试以下命令</span>
<span class="nb">sudo </span>apt-get <span class="nb">install </span>xorg
<span class="nb">sudo </span>apt-get <span class="nb">install </span>xfce4
</pre></table></code></div></div><li><p>安装VNC Server。这里的选择很多，VNC是一种协议，有许多实现版本，比如开源的vnc4server、tightvncserver，付费的realvncserver（有破解码）.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="c"># 多选一</span>
<span class="nb">sudo </span>apt-get <span class="nb">install </span>vnc4server <span class="c"># 这个在默认源中没有，要在/etc/apt/sources.list中添加deb http://cn.archive.ubuntu.com/ubuntu/ bionic universe</span>
   
<span class="nb">sudo </span>apt-get <span class="nb">install </span>tightvncserver
   
https://downloads.realvnc.com/download/file/vnc.files/VNC-Server-6.11.0-Linux-x64.deb
</pre></table></code></div></div><li><p>启动</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>vncserver
<span class="c"># 输出</span>
You will require a password to access your desktops.
   
Password:
Verify:
Would you like to enter a view-only password <span class="o">(</span>y/n<span class="o">)</span>? n
xauth:  file /home/olimi/.Xauthority does not exist
   
New <span class="s1">'X'</span> desktop is Olimi-PC-541:1
</pre></table></code></div></div><li><p>配置。默认配置启动连接会一片灰白。</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>vncserver <span class="nt">-kill</span> :1 <span class="c"># 结束前面启动的窗口1</span>
<span class="c"># 备份原来的配置文件</span>
<span class="nb">mv</span> ~/.vnc/xstartup ~/.vnc/xstartup.bak
<span class="c"># 编辑新的配置文件</span>
nano ~/.vnc/xstartup
<span class="c"># 输入以下内容</span>
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="c">#!/bin/sh</span>
   
<span class="c"># Uncomment the following two lines for normal desktop:</span>
<span class="nb">unset </span>SESSION_MANAGER
<span class="c"># exec /etc/X11/xinit/xinitrc</span>
   
<span class="o">[</span> <span class="nt">-x</span> /etc/vnc/xstartup <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">exec</span> /etc/vnc/xstartup
<span class="o">[</span> <span class="nt">-r</span> <span class="nv">$HOME</span>/.Xresources <span class="o">]</span> <span class="o">&amp;&amp;</span> xrdb <span class="nv">$HOME</span>/.Xresources
xsetroot <span class="nt">-solid</span> grey
vncconfig <span class="nt">-iconic</span> &amp;
x-terminal-emulator <span class="nt">-geometry</span> 80x24+10+10 <span class="nt">-ls</span> <span class="nt">-title</span> <span class="s2">"</span><span class="nv">$VNCDESKTOP</span><span class="s2"> Desktop"</span> &amp;
startxfce4 &amp;
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c"># 授予可执行权限</span>
<span class="nb">chmod </span>u+x ~/.vnc/xstartup
</pre></table></code></div></div><li><p>重新启动</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>vncserver <span class="c"># 或vncserver -geometry 1920x1080 :1</span>
</pre></table></code></div></div><li><p>使用VNC Viewer工具访问。<a href="https://www.realvnc.com/en/connect/download/viewer/?spm=a2c4g.11186623.0.0.51f42d32DpaFkW">RealVNC</a>下载Viewer，还是付费软件好用，虽然只是server付费。输入：<code class="language-plaintext highlighter-rouge">IP:端口号</code>。VNC默认端口为5900，每建立一个连接，VNC 端口号 +1。比如第一个VNC窗口，开放的端口就是5901. 也可以用MobaXterm软件连接。</p><p><img data-src="https://raw.githubusercontent.com/Olimiya/PicBed/main/image-20221115213339061.png" alt="image-20221115221854928" data-proofer-ignore></p><p><em>（经典死老鼠）</em></p></ol><h3 id="rdp"><span class="mr-2">RDP</span><a href="#rdp" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h3><p>关于RDP：</p><blockquote><p>rdp是windows系统专用的远程连接方式，但是ubuntu等linux系统下可以通过移花接木的方式，也就是xrdp, xrdp本身不具备桌面服务功能，需要和图形化桌面配合，这个提供桌面能力的其实就是xorg，xorg在ubuntu中默认存在，所以通过xrdp连接远程桌面默认会选择xorg，xorg为xrdp提供桌面服务，xrdp本身提供远程连接能力。如果你安装了GNOME, 那xorg就将GNOME桌面远程提供给你，如果你安装了xfce,xorg就将xfce桌面提供给你。可以说xorg是远程桌面服务的中间件，但是xorg和gnome配合不是很好，往往会有问题，但是网上也有解决方案，最佳的配合还是xfce+xorg+xrdp，由于xorg是ubuntu默认存在的图形化能力，所以只要在ubuntu中安装上xrdp，如果你的桌面系统是xfce就能直接使用远程桌面。</p></blockquote><ol><li><p>安装桌面系统同上。</p><li><p>安装xrdp</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt-get <span class="nb">install </span>xrdp
</pre></table></code></div></div><li><p>安装完成后，Xrdp服务将自动启动。没启动可以自行启动。</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>systemctl status xrdp <span class="c"># 查看状态</span>
<span class="c"># WSL不能执行systemctl，可以使用service命令</span>
<span class="nb">sudo </span>service xrdp status
<span class="nb">sudo </span>service xrdp start
</pre></table></code></div></div><p><img data-src="https://img2020.cnblogs.com/blog/1234034/202009/1234034-20200930083230253-965519395.jpg" alt="img" data-proofer-ignore></p><li><p>默认情况下，Xrdp会读取使用<code class="language-plaintext highlighter-rouge">/etc/ssl/private/ssl-cert-snakeoil.key</code>文件，但该文件仅由ssl-cert组的成员读取。 因此你需要运行以下命令以将<code class="language-plaintext highlighter-rouge">xrdp</code>用户添加到ssl-cert组：</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>adduser xrdp ssl-cert  <span class="c"># 添加用户组</span>
<span class="nb">sudo </span>systemctl restart xrdp <span class="c"># 重启服务</span>
</pre></table></code></div></div><li><p>Xrdp配置文件位于：<code class="language-plaintext highlighter-rouge">/etc/xrdp/xrdp.ini</code>。可自行配置。</p><li><p>*可选。远程桌面连接测试时黑屏，闪退：<code class="language-plaintext highlighter-rouge">rdp session has been disconnected.</code> 解决：</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nb">echo</span> <span class="s2">"startxfce4"</span> <span class="o">&gt;</span> ~/.Xsession
<span class="nb">chmod</span> +x ~/.Xsession
<span class="nb">sudo </span>service xrdp restart
</pre></table></code></div></div></ol><p>windows可以通过远程桌面客户端连接了，xrdp的端口和rdp一样都是<strong>3389</strong>，所以可以直接使用windows自带的远程桌面连接工具，连接口弹出窗口，默认选中了xorg，输入ubuntu用户名密码就可以登录.</p><blockquote><p>当然，xrdp不仅可以选择xorg，还能选择vnc-any，也就是选择了这个，你可以连接vnc服务端，也就是 xrdp不仅可以和xorg配合，也能和vnc4server、vino、tightvncserver等vnc服务端配置使用。</p></blockquote><p><img data-src="https://raw.githubusercontent.com/Olimiya/PicBed/main/image-20221115220102750.png" alt="image-20221115213339061" data-proofer-ignore></p><p>（这里因为没指定分辨率，而电脑屏幕是4k屏，没放缩的情况下显得很小）</p><h3 id="x11ssh转发"><span class="mr-2">X11+SSH转发</span><a href="#x11ssh转发" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h3><p>X Window System 常被简称为X11或X，其功能包括窗口的绘制、移动，以及与鼠标、键盘等输入设备的交互。X Window采用的是X11协议。X11 中的 X 指的就是 X 协议；11 指的是采用 X 协议的第 11 个版本。</p><p>关于什么是X11</p><blockquote><p>它采用C/S模型：一个X server 和多个应用程序（client）通信。server接收client的请求绘制窗口，并将来自鼠标、键盘等设备的输入传递给client。 X server和client可以位于同一计算机上，就类似于平时使用的Windows操作系统；当X server和client不在同一计算机时，使用本地的X server 进行绘制、交互，就变成了远程桌面。 举个例子：前者是你在披萨店点了一份披萨，店员在你旁边帮你做好拿给你（这家店相当于同一台计算机）；后者是你在网上叫了一份披萨，店员接单后到你家帮你做了一份披萨（注意：VNC是使用店里厨房，做好给你送过来；X转发是使用你家厨房做披萨）</p></blockquote><p>一般Xserver默认不允许直接网络传输，这时候就可以借助ssh通道进行显示。进一步的原理：</p><p><img data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/630a6cf2d5284c6cbf98a43bb5b8d567~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="sshforwarding.png" data-proofer-ignore></p><p>流程：</p><ol><li>sshd接受请求建立连接，并将本次ssh会话的DISPLAY指定为<code class="language-plaintext highlighter-rouge">hostname:10.0</code>，这里需要注意的是DISPLAY环境变量格式为<code class="language-plaintext highlighter-rouge">hostname:displaynumber.screennumber</code>,若hostname为空，则表示Xserver运行在本机，当以tcp连接时，displaynumber的值为实际连接的端口减去6000，即本次的监听端口为6010，而6010的监听者就是sshd程序。<li>在ssh会话中执行图形程序，ssh客户端本质上只负责输入和显示，程序的执行在sshd上。假设在命令行上运行xclock，这在pstree查看sshd进程可以看到<code class="language-plaintext highlighter-rouge">sshd(822369)---bash(822539)---xclock(1014618)</code>。xclock的父进程为bash。该程序与6010进行TCP通信，将X11协议数据发送到6010,sshd再将该数据放入ssh通道与ssh客户端进行通信。<li>ssh运行在客户端，该端同时运行Xserver.ssh与Xserver建立连接，将ssh通道中的X11协议数据发送到Xserver。</ol><p><img data-src="https://goteleport.com/blog/_next/static/media/x11-forwarding-setup.c67f3da7.png" alt="X11 转发设置" data-proofer-ignore></p><p><strong>实践：</strong>最简单的方案就是使用MobaXterm，自带内置的X Server，可以直接接管远程系统的图形化绘制请求。在连接ssh时默认会勾选x11-forwarding，就可以接收x11转发请求。剩下的是X11 Client端的配置。</p><p><img data-src="https://raw.githubusercontent.com/Olimiya/PicBed/main/image-20221115221854928.png" alt="image-20221115222834486" data-proofer-ignore></p><p><img data-src="https://bbs-img.huaweicloud.com/blogs/img/20220615/1655256876815937924.png" alt="image.png" data-proofer-ignore></p><p>如果登录时显示这个界面，就需要配置连接的远程客户端：</p><ol><li><p>安装X认证包：<code class="language-plaintext highlighter-rouge">apt install xorg-x11-xauth</code></p><li><p>打开ssh转发：编辑<code class="language-plaintext highlighter-rouge">/etc/ssh/sshd_config</code>：</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>#AllowAgentForwarding yes
AllowTcpForwarding yes   #这里打开
#GatewayPorts no
X11Forwarding yes      #这里原本就是打开的
#X11DisplayOffset 10
#X11UseLocalhost yes
#PermitTTY yes
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>service sshd restart
</pre></table></code></div></div></ol><p>以上是看来的未亲测。用云服务器测试（未安装桌面，小、穷、破），连进去就可以用：</p><p><img data-src="https://raw.githubusercontent.com/Olimiya/PicBed/main/image-20221115222834486.png" alt="image-20221115220102750" data-proofer-ignore></p><p>以下是个人配置：</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre>~ ⌚ 22:28:52
<span class="nb">sudo </span>dpkg <span class="nt">-l</span> | <span class="nb">grep </span>x11
ii  libx11-6:amd64                        2:1.6.9-2ubuntu1.2                amd64        X11 client-side library
ii  libx11-data                           2:1.6.9-2ubuntu1.2                all          X11 client-side library
ii  libx11-xcb1:amd64                     2:1.6.9-2ubuntu1.2                amd64        Xlib/XCB interface library
ii  x11-apps                              7.7+8                             amd64        X applications
ii  x11-common                            1:7.7+19ubuntu14                  all          X Window System <span class="o">(</span>X.Org<span class="o">)</span> infrastructure
ii  x11-utils                             7.7+5                             amd64        X11 utilities
rc  x11-xserver-utils                     7.7+8                             amd64        X server utilities

~ ⌚ 22:29:07
<span class="nv">$ </span><span class="nb">cat</span> /etc/ssh/sshd_config | <span class="nb">grep </span>AllowTcpForwarding
<span class="c">#AllowTcpForwarding yes</span>
<span class="c">#       AllowTcpForwarding no</span>

</pre></table></code></div></div><p>使用命令测试：</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="已复制！"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>xclock
<span class="c"># 如果找不到则安装</span>
<span class="nb">sudo </span>apt-get <span class="nb">install </span>x11-apps
</pre></table></code></div></div><p><img data-src="https://raw.githubusercontent.com/Olimiya/PicBed/main/image-20221115223152999.png" alt="image-20221115223152999" data-proofer-ignore></p><p><strong>总结：</strong>可以发现，这种途径是使用远程系统，需要使用GUI，但系统默认未安装图形界面时，最简便的途径。特别是一般情况下服务端空间宝贵，资源珍贵，使用GUI机会少，用X11转发流量是非常有性价比的行为。</p><p>References：</p><ol><li><a href="https://www.cnblogs.com/xingyu666/p/14132923.html#autoid-1-0-0">ubuntu20.10中设置桌面共享的三种方式(任选其一) - 星宇x - 博客园 (cnblogs.com)</a><li><div class="table-wrapper"><table><tbody><tr><td>[如何在Ubuntu 20.04上安装Xrdp服务器<td>myfreax](https://www.myfreax.com/how-to-install-xrdp-on-ubuntu-20-04/)</table></div><li><a href="https://www.lategege.com/?p=691#comment-1998">ubuntu远程桌面连接方式(vnc、xrdp、vino、xorg等概念) – late哥哥笔记 (lategege.com)</a><li><div class="table-wrapper"><table><tbody><tr><td>[Ubuntu 18.04 中安装 Xfce 和 SVN 开启远程桌面访问<td>Ethan’s Blog - 记录和思考 (ethanblog.com)](https://ethanblog.com/tips/enable-remote-desktop-in-ubuntu-18-04-with-xface-and-svn.html)</table></div><li><a href="https://blog.csdn.net/weixin_40908748/article/details/125431387">(11条消息) 【华为云】用VNC远程连接Ubuntu20.04图形界面_Desny的博客-CSDN博客_vnc远程连接ubuntu桌面</a><li><a href="https://help.aliyun.com/document_detail/59330.html">通过VNC搭建Ubuntu 18.04和20.04图形界面 (aliyun.com)</a><li><a href="https://askubuntu.com/questions/1245020/xrdp-on-ubuntu-20-04">remote desktop - Xrdp on Ubuntu 20.04 - Ask Ubuntu</a><li><a href="https://www.cnblogs.com/sjqlwy/p/mobaxterm.html">忘掉VNC/RDP，拿起手中的MobaXterm轻松上手远程桌面 - 思兼 - 博客园 (cnblogs.com)</a><li><a href="https://juejin.cn/post/7093898366475567118">ssh X11 Forwarding机制浅析 - 掘金 (juejin.cn)</a><li><a href="https://goteleport.com/blog/x11-forwarding/">您需要了解的有关 X11 转发的信息 (goteleport.com)</a></ol><h2 id="后述"><span class="mr-2">后述</span><a href="#后述" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h2><p>在玩的过程有碰到什么有意思的再补充吧。</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="iconfont icon-FolderOpen-1"></i> <a href='/categories/%E6%95%99%E7%A8%8B/'>教程</a></div><div class="post-tags"> <i class="iconfont icon-tag"></i> <a href="/tags/windows-terminal/" class="post-tag no-text-decoration" >Windows Terminal</a> <a href="/tags/wsl/" class="post-tag no-text-decoration" >WSL</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 本文由作者按照 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 进行授权</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">分享</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Windows+Terminal+%2B+WSL+%2B+Ubuntu+%2B+%E5%9B%BE%E5%BD%A2%E5%8C%96+%E6%80%BB%E7%BB%93+-+Olimi&url=https%3A%2F%2Folimiya.github.io%2Fposts%2FWindows-Terminal-%2B-WSL-%2B-Ubuntu-%2B-%25E5%259B%25BE%25E5%25BD%25A2%25E5%258C%2596-%25E7%25BB%2588%25E7%25AB%25AF%25E9%2585%258D%25E7%25BD%25AE%25E6%2580%25BB%25E7%25BB%2593%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="iconfont icon-twitter"></i> </a> <a href="https://lineit.line.me/share/ui?url=https%3A%2F%2Folimiya.github.io%2Fposts%2FWindows-Terminal-%2B-WSL-%2B-Ubuntu-%2B-%25E5%259B%25BE%25E5%25BD%25A2%25E5%258C%2596-%25E7%25BB%2588%25E7%25AB%25AF%25E9%2585%258D%25E7%25BD%25AE%25E6%2580%25BB%25E7%25BB%2593%2F&text=Windows+Terminal+%2B+WSL+%2B+Ubuntu+%2B+%E5%9B%BE%E5%BD%A2%E5%8C%96+%E6%80%BB%E7%BB%93+-+Olimi" data-toggle="tooltip" data-placement="top" title="Line" target="_blank" rel="noopener" aria-label="Line"> <i class="iconfont icon-13"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Windows+Terminal+%2B+WSL+%2B+Ubuntu+%2B+%E5%9B%BE%E5%BD%A2%E5%8C%96+%E6%80%BB%E7%BB%93+-+Olimi&u=https%3A%2F%2Folimiya.github.io%2Fposts%2FWindows-Terminal-%2B-WSL-%2B-Ubuntu-%2B-%25E5%259B%25BE%25E5%25BD%25A2%25E5%258C%2596-%25E7%25BB%2588%25E7%25AB%25AF%25E9%2585%258D%25E7%25BD%25AE%25E6%2580%25BB%25E7%25BB%2593%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="iconfont icon-facebook"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Folimiya.github.io%2Fposts%2FWindows-Terminal-%2B-WSL-%2B-Ubuntu-%2B-%25E5%259B%25BE%25E5%25BD%25A2%25E5%258C%2596-%25E7%25BB%2588%25E7%25AB%25AF%25E9%2585%258D%25E7%25BD%25AE%25E6%2580%25BB%25E7%25BB%2593%2F&text=Windows+Terminal+%2B+WSL+%2B+Ubuntu+%2B+%E5%9B%BE%E5%BD%A2%E5%8C%96+%E6%80%BB%E7%BB%93+-+Olimi" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="iconfont icon-telegram"></i> </a> <a href="http://connect.qq.com/widget/shareqq/index.html?url=https%3A%2F%2Folimiya.github.io%2Fposts%2FWindows-Terminal-%2B-WSL-%2B-Ubuntu-%2B-%25E5%259B%25BE%25E5%25BD%25A2%25E5%258C%2596-%25E7%25BB%2588%25E7%25AB%25AF%25E9%2585%258D%25E7%25BD%25AE%25E6%2580%25BB%25E7%25BB%2593%2F&title=Windows+Terminal+%2B+WSL+%2B+Ubuntu+%2B+%E5%9B%BE%E5%BD%A2%E5%8C%96+%E6%80%BB%E7%BB%93+-+Olimi" data-toggle="tooltip" data-placement="top" title="QQ" target="_blank" rel="noopener" aria-label="QQ"> <i class="iconfont icon-QQ"></i> </a> <a href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https%3A%2F%2Folimiya.github.io%2Fposts%2FWindows-Terminal-%2B-WSL-%2B-Ubuntu-%2B-%25E5%259B%25BE%25E5%25BD%25A2%25E5%258C%2596-%25E7%25BB%2588%25E7%25AB%25AF%25E9%2585%258D%25E7%25BD%25AE%25E6%2580%25BB%25E7%25BB%2593%2F&title=Windows+Terminal+%2B+WSL+%2B+Ubuntu+%2B+%E5%9B%BE%E5%BD%A2%E5%8C%96+%E6%80%BB%E7%BB%93+-+Olimi" data-toggle="tooltip" data-placement="top" title="QQ 空间" target="_blank" rel="noopener" aria-label="QQ 空间"> <i class="iconfont icon-qzone"></i> </a> <a href="http://service.weibo.com/share/share.php?title=Windows+Terminal+%2B+WSL+%2B+Ubuntu+%2B+%E5%9B%BE%E5%BD%A2%E5%8C%96+%E6%80%BB%E7%BB%93+-+Olimi&url=https%3A%2F%2Folimiya.github.io%2Fposts%2FWindows-Terminal-%2B-WSL-%2B-Ubuntu-%2B-%25E5%259B%25BE%25E5%25BD%25A2%25E5%258C%2596-%25E7%25BB%2588%25E7%25AB%25AF%25E9%2585%258D%25E7%25BD%25AE%25E6%2580%25BB%25E7%25BB%2593%2F" data-toggle="tooltip" data-placement="top" title="微博" target="_blank" rel="noopener" aria-label="微博"> <i class="iconfont icon-weibo"></i> </a> <i id="copy-link" class="iconfont icon-link small" data-toggle="tooltip" data-placement="top" title="分享链接" data-title-succeed="链接已复制！"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">最近更新</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%80%BB%E7%BB%93-Windows%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8/">命令行总结-Windows包管理器</a><li><a href="/posts/GithubPage/">GithubPage</a><li><a href="/posts/Windows-Terminal-+-WSL-+-Ubuntu-+-%E5%9B%BE%E5%BD%A2%E5%8C%96-%E7%BB%88%E7%AB%AF%E9%85%8D%E7%BD%AE%E6%80%BB%E7%BB%93/">Windows Terminal + WSL + Ubuntu + 图形化 总结</a><li><a href="/posts/%E4%B8%AA%E4%BA%BA%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8C%87%E5%8D%97/">个人云服务器指南</a><li><a href="/posts/%E6%97%A7%E9%85%8D%E7%BD%AE%E7%AC%94%E8%AE%B0%E6%9C%AC%E6%9B%B4%E6%96%B0Windows11-CPU%E4%B8%8D%E5%85%BC%E5%AE%B9/">旧配置笔记本更新windows11 Cpu不兼容</a></ul></div><div id="access-links"><div class="panel-heading">外部链接</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="https://996.icu" target="_blank"> <img src="https://img.shields.io/badge/link-996.icu-red.svg" alt="996.icu" /> </a><li><a href="https://github.com/Olimiya/olimiya.github.io" target="_blank"> <i class="iconfont icon-github"></i> &nbsp;此博客的 Github 仓库 </a></ul></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">文章内容</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>相关文章</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Linux%E8%B5%84%E6%BA%90%E9%85%8D%E7%BD%AE/"><div class="card-body"> <em class="timeago small" data-ts="1649692800" > 2022-04-12 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Linux常用命令总结</h3><div class="text-muted small"><p> 参考API网址：Linux 命令大全 Linux资源配置 查看 汇总 查看系统配置，汇总信息CPU、内存、硬盘、网络等等： 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 4...</p></div></div></a></div><div class="card"> <a href="/posts/Markdown/"><div class="card-body"> <em class="timeago small" data-ts="1650459778" > 2022-04-20 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Markdown语法及测试</h3><div class="text-muted small"><p> 前言 总结一下常用的一些MD语法，以及针对于Chirpy主题渲染的一些指令。同时对各个MD Snippets在VSCode、Typora中分别测试一下快捷键和使用。 使用的环境：本地Typora、Web端Jekyll+Chirpy主题 MD语法教程：https://www.runoob.com/markdown/md-tutorial.html Chirpy 语法讲解 效果 个人将...</p></div></div></a></div><div class="card"> <a href="/posts/%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83%E6%B1%87%E6%80%BB-%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0/"><div class="card-body"> <em class="timeago small" data-ts="1581149160" > 2020-02-08 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>编码规范汇总【持续更新】/C++/C#</h3><div class="text-muted small"><p> 前言 作为软件工程师，出产物就应该具备工程的健壮性和美观性。因此代码规范是作为软件工程师的职业素养。但总所周知，程序员的工作基本就是在维护一座屎山，这确实是现实中种种客观条件约束下导致的。 记录本篇博客，也是希望本人在打码过程，能够保持负责任的初心，以及追求完美的极客精神吧。 诸君共勉。愿人间没有ugly的代码。 规范标准 首先列出一些常见的编码规范。 C++规范 一． 变量声...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/%E6%9E%84%E5%BB%BA%E6%88%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E7%A9%BA%E9%97%B4/" class="btn btn-outline-primary" prompt="上一篇"><p>构建我的工作空间</p></a> <a href="/posts/VMWare%E8%99%9A%E6%8B%9F%E6%9C%BA%E8%81%94%E7%BD%91%E9%97%AE%E9%A2%98-%E6%A1%A5%E6%8E%A5-NAT-%E4%BB%85%E4%B8%BB%E6%9C%BA%E9%85%8D%E7%BD%AE/" class="btn btn-outline-primary" prompt="下一篇"><p>VMWare虚拟机网络探讨-桥接、NAT、仅主机配置</p></a></div><div id="waline"></div><script> function loadWaline() { var s = document.createElement('script'); s.setAttribute('src', '//cdn.jsdelivr.net/npm/@waline/client'); s.async = false; document.body.appendChild(s); s.onload = () => { var valine = Waline({ el: '#waline', serverURL: 'https://waline.olimi.icu/', emoji: [ 'https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/qq', 'https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/tieba', 'https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/tw-emoji', 'https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/bilibili', ], dark: 'html[data-mode=dark]', avatar: 'mp', placeholder: '说点什么吧！', }); }; }; setTimeout(function () { if ("IntersectionObserver" in window) { var io = new IntersectionObserver(function (entries) { if (entries[0].isIntersecting) { loadWaline(); io.disconnect(); } }); io.observe(document.getElementById('waline')); } else { loadWaline(); } }, 1); </script></div></div></div><footer class="d-flex w-100 justify-content-center"> <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"> </script><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://olimiya.github.io/">Olimi</a>. <span data-toggle="tooltip" data-placement="top" title="除非另有说明，本网站上的博客文章均由作者按照知识共享署名 4.0 国际 (CC BY 4.0) 许可协议进行授权。">保留部分权利。</span> <span id="busuanzi_container_site_uv">总访客数<span id="busuanzi_value_site_uv"></span>人。</span></p></div><div class="footer-middle"><p class="mb-0"> <a href="http://beian.miit.gov.cn/" target="_blank">粤ICP备号</a></p></div><div class="footer-right"><p class="mb-0"> 本站由 <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> 生成，采用 <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> 主题。</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/%E8%AE%B0%E5%BD%95/">记录</a> <a class="post-tag" href="/tags/%E6%B8%B8%E6%88%8F%E5%BC%95%E6%93%8E/">游戏引擎</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/linux%E7%BC%96%E7%A8%8B/">Linux编程</a> <a class="post-tag" href="/tags/%E6%BC%AB%E8%B0%88/">漫谈</a> <a class="post-tag" href="/tags/%E7%BD%91%E7%AB%99/">网站</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/git/">Git</a> <a class="post-tag" href="/tags/markdown/">Markdown</a> <a class="post-tag" href="/tags/shell/">shell</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="iconfont icon-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">搜索结果为空</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="iconfont icon-folder"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="iconfont icon-tag"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/zh.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-NKV7205XPP"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-NKV7205XPP'); }); </script>
